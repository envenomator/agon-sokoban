Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED15-Apr-23     15:21:42     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -peephole -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\vdp.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    	SEGMENT CODE
                           A     8    .BEGREC "NONAME0",8
                           A     9    .DEFINE "baudRate"
                           A    10    .VALUE 0
                           A    11    .CLASS 8
                           A    12    .TYPE 4
                           A    13    .ENDEF
                           A    14    .DEFINE "dataBits"
                           A    15    .VALUE 3
                           A    16    .CLASS 8
                           A    17    .TYPE 12
                           A    18    .ENDEF
                           A    19    .DEFINE "stopBits"
                           A    20    .VALUE 4
                           A    21    .CLASS 8
                           A    22    .TYPE 12
                           A    23    .ENDEF
                           A    24    .DEFINE "parity"
                           A    25    .VALUE 5
                           A    26    .CLASS 8
                           A    27    .TYPE 12
                           A    28    .ENDEF
                           A    29    .DEFINE "flowcontrol"
                           A    30    .VALUE 6
                           A    31    .CLASS 8
                           A    32    .TYPE 12
                           A    33    .ENDEF
                           A    34    .DEFINE "eir"
                           A    35    .VALUE 7
                           A    36    .CLASS 8
                           A    37    .TYPE 12
                           A    38    .ENDEF
                           A    39    .ENDREC "NONAME0"
                           A    40    ;    1	#include <defines.h>
                           A    41    ;    2	#include "vdp.h"
                           A    42    ;    3	#include "mos-interface.h"
                           A    43    ;    4	
                           A    44    ;    5	// Generic functions
                           A    45    ;    6	
                           A    46    ;    7	void write16bit(UINT16 w)
                           A    47    ;    8	{
0402EA                     A    48    _write16bit:
                           A    49    .DEFINE "_write16bit"
                           A    50    
                           A    51    .VALUE _write16bit
                           A    52    
                           A    53    .CLASS 2
                           A    54    
                           A    55    .TYPE 65
                           A    56    
                           A    57    .ENDEF
                           A    58    
                           A    59    .BEGFUNC "write16bit",8,"_write16bit"
                           A    60    
                           A    61    .LINE 8
                           A    62    
                           A    63    .DEFINE "w"
                           A    64    
                           A    65    .CLASS 65
                           A    66    
                           A    67    .VALUE 6
                           A    68    
                           A    69    .TYPE 13
                           A    70    
                           A    71    .ENDEF
                           A    72    
0402EA DDE5                A    73    	PUSH	IX
0402EC DD210000 00         A    74    	LD	IX,0
0402F1 DD39                A    75    	ADD	IX,SP
                           A    76    ;    9		putch(w & 0xFF); // write LSB
                           A    77    .LINE 9
                           A    78    
0402F3 DD0706              A    79    	LD	BC,(IX+%6)
0402F6 CD AD 2F 04         A    80    	CALL	__stoiu
0402FA 7D                  A    81    	LD	A,L
0402FB B7ED62              A    82    	UEXT	HL
0402FE 6F                  A    83    	LD	L,A
0402FF E5                  A    84    	PUSH	HL
040300 CD 5F 29 04         A    85    	CALL	_putch
040304 C1                  A    86    	POP	BC
                           A    87    ;   10		putch(w >> 8);	 // write MSB	
                           A    88    .LINE 10
                           A    89    
040305 DD0706              A    90    	LD	BC,(IX+%6)
040308 CD AD 2F 04         A    91    	CALL	__stoiu
04030C 3E08                A    92    	LD	A,%8
04030E CD 02 2E 04         A    93    	CALL	__ishrs_b
040312 E5                  A    94    	PUSH	HL
040313 CD 5F 29 04         A    95    	CALL	_putch
040317 C1                  A    96    	POP	BC
                           A    97    ;   11	}
                           A    98    .LINE 11
                           A    99    
040318 DDF9                A   100    	LD	SP,IX
04031A DDE1                A   101    	POP	IX
04031C C9                  A   102    	RET	
                           A   103    
                           A   104    
                           A   105    ;**************************** _write16bit *****
                           A   106    ;Name                         Addr/Register   S
                           A   107    ;_putch                              IMPORT  --
                           A   108    ;w                                     IX+6    
                           A   109    
                           A   110    
                           A   111    ; Stack Frame Size: 9 (bytes)
                           A   112    ;       Spill Code: 0 (instruction)
                           A   113    
                           A   114    
                           A   115    .ENDFUNC "write16bit",11,"_write16bit"
                           A   116    ;   12	
                           A   117    ;   13	void write32bit(UINT32 l)
                           A   118    ;   14	{
04031D                     A   119    _write32bit:
                           A   120    .DEFINE "_write32bit"
                           A   121    
                           A   122    .VALUE _write32bit
                           A   123    
                           A   124    .CLASS 2
                           A   125    
                           A   126    .TYPE 65
                           A   127    
                           A   128    .ENDEF
                           A   129    
                           A   130    .BEGFUNC "write32bit",14,"_write32bit"
                           A   131    
                           A   132    .LINE 14
                           A   133    
                           A   134    .DEFINE "l"
                           A   135    
                           A   136    .CLASS 65
                           A   137    
                           A   138    .VALUE 6
                           A   139    
                           A   140    .TYPE 15
                           A   141    
                           A   142    .ENDEF
                           A   143    
                           A   144    .DEFINE "temp"
                           A   145    
                           A   146    .CLASS 65
                           A   147    
                           A   148    .VALUE -4
                           A   149    
                           A   150    .TYPE 15
                           A   151    
                           A   152    .ENDEF
                           A   153    
04031D DDE5                A   154    	PUSH	IX
04031F DD210000 00         A   155    	LD	IX,0
040324 DD39                A   156    	ADD	IX,SP
040326 C5                  A   157    	PUSH	BC
040327 3B                  A   158    	DEC	SP
                           A   159    ;   15		UINT32 temp = l;
                           A   160    ;   16		
                           A   161    ;   17		putch(temp & 0xFF); // write LSB
                           A   162    .LINE 17
                           A   163    
040328 DD2706              A   164    	LD	HL,(IX+%6)
04032B 7D                  A   165    	LD	A,L
04032C B7ED62              A   166    	UEXT	HL
04032F 6F                  A   167    	LD	L,A
040330 E5                  A   168    	PUSH	HL
040331 CD 5F 29 04         A   169    	CALL	_putch
040335 C1                  A   170    	POP	BC
                           A   171    ;   18		temp = temp >> 8;
                           A   172    .LINE 18
                           A   173    
040336 DD0706              A   174    	LD	BC,(IX+%6)
040339 DD7E09              A   175    	LD	A,(IX+%9)
04033C 2E08                A   176    	LD	L,%8
04033E CD 91 33 04         A   177    	CALL	__lshru
040342 DD0FFC              A   178    	LD	(IX+%FFFFFFFC),BC
040345 DD77FF              A   179    	LD	(IX+%FFFFFFFF),A
                           A   180    ;   19		putch(temp & 0xFF);
                           A   181    .LINE 19
                           A   182    
040348 C5E1                A   183    	LD	HL,BC
04034A 7D                  A   184    	LD	A,L
04034B B7ED62              A   185    	UEXT	HL
04034E 6F                  A   186    	LD	L,A
04034F E5                  A   187    	PUSH	HL
040350 CD 5F 29 04         A   188    	CALL	_putch
040354 C1                  A   189    	POP	BC
                           A   190    ;   20		temp = temp >> 8;
                           A   191    .LINE 20
                           A   192    
040355 DD07FC              A   193    	LD	BC,(IX+%FFFFFFFC)
040358 DD7EFF              A   194    	LD	A,(IX+%FFFFFFFF)
04035B 2E08                A   195    	LD	L,%8
04035D CD 91 33 04         A   196    	CALL	__lshru
040361 DD0FFC              A   197    	LD	(IX+%FFFFFFFC),BC
040364 DD77FF              A   198    	LD	(IX+%FFFFFFFF),A
                           A   199    ;   21		putch(temp & 0xFF);
                           A   200    .LINE 21
                           A   201    
040367 C5E1                A   202    	LD	HL,BC
040369 7D                  A   203    	LD	A,L
04036A B7ED62              A   204    	UEXT	HL
04036D 6F                  A   205    	LD	L,A
04036E E5                  A   206    	PUSH	HL
04036F CD 5F 29 04         A   207    	CALL	_putch
040373 C1                  A   208    	POP	BC
                           A   209    ;   22		temp = temp >> 8;
                           A   210    .LINE 22
                           A   211    
040374 DD07FC              A   212    	LD	BC,(IX+%FFFFFFFC)
040377 DD7EFF              A   213    	LD	A,(IX+%FFFFFFFF)
04037A 2E08                A   214    	LD	L,%8
04037C CD 91 33 04         A   215    	CALL	__lshru
040380 DD0FFC              A   216    	LD	(IX+%FFFFFFFC),BC
040383 DD77FF              A   217    	LD	(IX+%FFFFFFFF),A
                           A   218    ;   23		putch(temp & 0xFF);
                           A   219    .LINE 23
                           A   220    
040386 C5E1                A   221    	LD	HL,BC
040388 7D                  A   222    	LD	A,L
040389 B7ED62              A   223    	UEXT	HL
04038C 6F                  A   224    	LD	L,A
04038D E5                  A   225    	PUSH	HL
04038E CD 5F 29 04         A   226    	CALL	_putch
040392 C1                  A   227    	POP	BC
                           A   228    ;   24		return;	
                           A   229    ;   25	}
                           A   230    .LINE 25
                           A   231    
040393 DDF9                A   232    	LD	SP,IX
040395 DDE1                A   233    	POP	IX
040397 C9                  A   234    	RET	
                           A   235    
                           A   236    
                           A   237    ;**************************** _write32bit *****
                           A   238    ;Name                         Addr/Register   S
                           A   239    ;_putch                              IMPORT  --
                           A   240    ;temp                                  IX-4    
                           A   241    ;l                                     IX+6    
                           A   242    
                           A   243    
                           A   244    ; Stack Frame Size: 16 (bytes)
                           A   245    ;       Spill Code: 0 (instruction)
                           A   246    
                           A   247    
                           A   248    .ENDFUNC "write32bit",25,"_write32bit"
                           A   249    ;   26	
                           A   250    ;   27	void vdp_mode(unsigned char mode)
                           A   251    ;   28	{
040398                     A   252    _vdp_mode:
                           A   253    .DEFINE "_vdp_mode"
                           A   254    
                           A   255    .VALUE _vdp_mode
                           A   256    
                           A   257    .CLASS 2
                           A   258    
                           A   259    .TYPE 65
                           A   260    
                           A   261    .ENDEF
                           A   262    
                           A   263    .BEGFUNC "vdp_mode",28,"_vdp_mode"
                           A   264    
                           A   265    .LINE 28
                           A   266    
                           A   267    .DEFINE "mode"
                           A   268    
                           A   269    .CLASS 65
                           A   270    
                           A   271    .VALUE 6
                           A   272    
                           A   273    .TYPE 12
                           A   274    
                           A   275    .ENDEF
                           A   276    
040398 DDE5                A   277    	PUSH	IX
04039A DD210000 00         A   278    	LD	IX,0
04039F DD39                A   279    	ADD	IX,SP
                           A   280    ;   29	    putch(22);
                           A   281    .LINE 29
                           A   282    
0403A1 01160000            A   283    	LD	BC,22
0403A5 C5                  A   284    	PUSH	BC
0403A6 CD 5F 29 04         A   285    	CALL	_putch
0403AA C1                  A   286    	POP	BC
                           A   287    ;   30	    putch(mode);
                           A   288    .LINE 30
                           A   289    
0403AB DD7E06              A   290    	LD	A,(IX+%6)
0403AE B7ED62              A   291    	UEXT	HL
0403B1 6F                  A   292    	LD	L,A
0403B2 E5                  A   293    	PUSH	HL
0403B3 CD 5F 29 04         A   294    	CALL	_putch
0403B7 C1                  A   295    	POP	BC
                           A   296    ;   31	}
                           A   297    .LINE 31
                           A   298    
0403B8 DDF9                A   299    	LD	SP,IX
0403BA DDE1                A   300    	POP	IX
0403BC C9                  A   301    	RET	
                           A   302    
                           A   303    
                           A   304    ;**************************** _vdp_mode *******
                           A   305    ;Name                         Addr/Register   S
                           A   306    ;_putch                              IMPORT  --
                           A   307    ;mode                                  IX+6    
                           A   308    
                           A   309    
                           A   310    ; Stack Frame Size: 9 (bytes)
                           A   311    ;       Spill Code: 0 (instruction)
                           A   312    
                           A   313    
                           A   314    .ENDFUNC "vdp_mode",31,"_vdp_mode"
                           A   315    ;   32	
                           A   316    ;   33	void vdp_getMode(void) {
0403BD                     A   317    _vdp_getMode:
                           A   318    .DEFINE "_vdp_getMode"
                           A   319    
                           A   320    .VALUE _vdp_getMode
                           A   321    
                           A   322    .CLASS 2
                           A   323    
                           A   324    .TYPE 65
                           A   325    
                           A   326    .ENDEF
                           A   327    
                           A   328    .BEGFUNC "vdp_getMode",33,"_vdp_getMode"
                           A   329    
0403BD DDE5                A   330    	PUSH	IX
0403BF DD210000 00         A   331    	LD	IX,0
0403C4 DD39                A   332    	ADD	IX,SP
                           A   333    ;   34		putch(23);
                           A   334    .LINE 34
                           A   335    
0403C6 01170000            A   336    	LD	BC,23
0403CA C5                  A   337    	PUSH	BC
0403CB CD 5F 29 04         A   338    	CALL	_putch
0403CF C1                  A   339    	POP	BC
                           A   340    ;   35		putch(0);
                           A   341    .LINE 35
                           A   342    
0403D0 01000000            A   343    	LD	BC,0
0403D4 C5                  A   344    	PUSH	BC
0403D5 CD 5F 29 04         A   345    	CALL	_putch
0403D9 C1                  A   346    	POP	BC
                           A   347    ;   36		putch(0x86);
                           A   348    .LINE 36
                           A   349    
0403DA 01860000            A   350    	LD	BC,134
0403DE C5                  A   351    	PUSH	BC
0403DF CD 5F 29 04         A   352    	CALL	_putch
0403E3 C1                  A   353    	POP	BC
                           A   354    ;   37	}
                           A   355    .LINE 37
                           A   356    
0403E4 DDF9                A   357    	LD	SP,IX
0403E6 DDE1                A   358    	POP	IX
0403E8 C9                  A   359    	RET	
                           A   360    
                           A   361    
                           A   362    ;**************************** _vdp_getMode ****
                           A   363    ;Name                         Addr/Register   S
                           A   364    ;_putch                              IMPORT  --
                           A   365    
                           A   366    
                           A   367    ; Stack Frame Size: 6 (bytes)
                           A   368    ;       Spill Code: 0 (instruction)
                           A   369    
                           A   370    
                           A   371    .ENDFUNC "vdp_getMode",37,"_vdp_getMode"
                           A   372    ;   38	
                           A   373    ;   39	void vdp_setPaletteColor(UINT8 index, U
0403E9                     A   374    _vdp_setPaletteColor:
                           A   375    .DEFINE "_vdp_setPaletteColor"
                           A   376    
                           A   377    .VALUE _vdp_setPaletteColor
                           A   378    
                           A   379    .CLASS 2
                           A   380    
                           A   381    .TYPE 65
                           A   382    
                           A   383    .ENDEF
                           A   384    
                           A   385    .BEGFUNC "vdp_setPaletteColor",39,"_vdp_setPale
                           A   386    
                           A   387    .LINE 39
                           A   388    
                           A   389    .DEFINE "index"
                           A   390    
                           A   391    .CLASS 65
                           A   392    
                           A   393    .VALUE 6
                           A   394    
                           A   395    .TYPE 12
                           A   396    
                           A   397    .ENDEF
                           A   398    
                           A   399    .DEFINE "color"
                           A   400    
                           A   401    .CLASS 65
                           A   402    
                           A   403    .VALUE 9
                           A   404    
                           A   405    .TYPE 12
                           A   406    
                           A   407    .ENDEF
                           A   408    
                           A   409    .DEFINE "r"
                           A   410    
                           A   411    .CLASS 65
                           A   412    
                           A   413    .VALUE 12
                           A   414    
                           A   415    .TYPE 12
                           A   416    
                           A   417    .ENDEF
                           A   418    
                           A   419    .DEFINE "g"
                           A   420    
                           A   421    .CLASS 65
                           A   422    
                           A   423    .VALUE 15
                           A   424    
                           A   425    .TYPE 12
                           A   426    
                           A   427    .ENDEF
                           A   428    
                           A   429    .DEFINE "b"
                           A   430    
                           A   431    .CLASS 65
                           A   432    
                           A   433    .VALUE 18
                           A   434    
                           A   435    .TYPE 12
                           A   436    
                           A   437    .ENDEF
                           A   438    
0403E9 DDE5                A   439    	PUSH	IX
0403EB DD210000 00         A   440    	LD	IX,0
0403F0 DD39                A   441    	ADD	IX,SP
                           A   442    ;   40		putch(0x13); // VDU palette
                           A   443    .LINE 40
                           A   444    
0403F2 01130000            A   445    	LD	BC,19
0403F6 C5                  A   446    	PUSH	BC
0403F7 CD 5F 29 04         A   447    	CALL	_putch
0403FB C1                  A   448    	POP	BC
                           A   449    ;   41		putch(index);
                           A   450    .LINE 41
                           A   451    
0403FC DD7E06              A   452    	LD	A,(IX+%6)
0403FF B7ED62              A   453    	UEXT	HL
040402 6F                  A   454    	LD	L,A
040403 E5                  A   455    	PUSH	HL
040404 CD 5F 29 04         A   456    	CALL	_putch
040408 C1                  A   457    	POP	BC
                           A   458    ;   42		putch(color); // 255 - set R/G/B co
                           A   459    .LINE 42
                           A   460    
040409 DD7E09              A   461    	LD	A,(IX+%9)
04040C B7ED62              A   462    	UEXT	HL
04040F 6F                  A   463    	LD	L,A
040410 E5                  A   464    	PUSH	HL
040411 CD 5F 29 04         A   465    	CALL	_putch
040415 C1                  A   466    	POP	BC
                           A   467    ;   43		putch(r);
                           A   468    .LINE 43
                           A   469    
040416 DD7E0C              A   470    	LD	A,(IX+%C)
040419 B7ED62              A   471    	UEXT	HL
04041C 6F                  A   472    	LD	L,A
04041D E5                  A   473    	PUSH	HL
04041E CD 5F 29 04         A   474    	CALL	_putch
040422 C1                  A   475    	POP	BC
                           A   476    ;   44		putch(g);
                           A   477    .LINE 44
                           A   478    
040423 DD7E0F              A   479    	LD	A,(IX+%F)
040426 B7ED62              A   480    	UEXT	HL
040429 6F                  A   481    	LD	L,A
04042A E5                  A   482    	PUSH	HL
04042B CD 5F 29 04         A   483    	CALL	_putch
04042F C1                  A   484    	POP	BC
                           A   485    ;   45		putch(b);
                           A   486    .LINE 45
                           A   487    
040430 DD7E12              A   488    	LD	A,(IX+%12)
040433 B7ED62              A   489    	UEXT	HL
040436 6F                  A   490    	LD	L,A
040437 E5                  A   491    	PUSH	HL
040438 CD 5F 29 04         A   492    	CALL	_putch
04043C C1                  A   493    	POP	BC
                           A   494    ;   46	}
                           A   495    .LINE 46
                           A   496    
04043D DDF9                A   497    	LD	SP,IX
04043F DDE1                A   498    	POP	IX
040441 C9                  A   499    	RET	
                           A   500    
                           A   501    
                           A   502    ;**************************** _vdp_setPaletteCo
                           A   503    ;Name                         Addr/Register   S
                           A   504    ;_putch                              IMPORT  --
                           A   505    ;b                                    IX+18    
                           A   506    ;g                                    IX+15    
                           A   507    ;r                                    IX+12    
                           A   508    ;color                                 IX+9    
                           A   509    ;index                                 IX+6    
                           A   510    
                           A   511    
                           A   512    ; Stack Frame Size: 21 (bytes)
                           A   513    ;       Spill Code: 0 (instruction)
                           A   514    
                           A   515    
                           A   516    .ENDFUNC "vdp_setPaletteColor",46,"_vdp_setPale
                           A   517    ;   47	
                           A   518    ;   48	// Text functions
                           A   519    ;   49	void vdp_cls()
                           A   520    ;   50	{
040442                     A   521    _vdp_cls:
                           A   522    .DEFINE "_vdp_cls"
                           A   523    
                           A   524    .VALUE _vdp_cls
                           A   525    
                           A   526    .CLASS 2
                           A   527    
                           A   528    .TYPE 65
                           A   529    
                           A   530    .ENDEF
                           A   531    
                           A   532    .BEGFUNC "vdp_cls",50,"_vdp_cls"
                           A   533    
040442 DDE5                A   534    	PUSH	IX
040444 DD210000 00         A   535    	LD	IX,0
040449 DD39                A   536    	ADD	IX,SP
                           A   537    ;   51	    putch(12);
                           A   538    .LINE 51
                           A   539    
04044B 010C0000            A   540    	LD	BC,12
04044F C5                  A   541    	PUSH	BC
040450 CD 5F 29 04         A   542    	CALL	_putch
040454 C1                  A   543    	POP	BC
                           A   544    ;   52	}
                           A   545    .LINE 52
                           A   546    
040455 DDF9                A   547    	LD	SP,IX
040457 DDE1                A   548    	POP	IX
040459 C9                  A   549    	RET	
                           A   550    
                           A   551    
                           A   552    ;**************************** _vdp_cls ********
                           A   553    ;Name                         Addr/Register   S
                           A   554    ;_putch                              IMPORT  --
                           A   555    
                           A   556    
                           A   557    ; Stack Frame Size: 6 (bytes)
                           A   558    ;       Spill Code: 0 (instruction)
                           A   559    
                           A   560    
                           A   561    .ENDFUNC "vdp_cls",52,"_vdp_cls"
                           A   562    ;   53	
                           A   563    ;   54	void vdp_cursorHome()
                           A   564    ;   55	{
04045A                     A   565    _vdp_cursorHome:
                           A   566    .DEFINE "_vdp_cursorHome"
                           A   567    
                           A   568    .VALUE _vdp_cursorHome
                           A   569    
                           A   570    .CLASS 2
                           A   571    
                           A   572    .TYPE 65
                           A   573    
                           A   574    .ENDEF
                           A   575    
                           A   576    .BEGFUNC "vdp_cursorHome",55,"_vdp_cursorHome"
                           A   577    
04045A DDE5                A   578    	PUSH	IX
04045C DD210000 00         A   579    	LD	IX,0
040461 DD39                A   580    	ADD	IX,SP
                           A   581    ;   56	    putch(30);
                           A   582    .LINE 56
                           A   583    
040463 011E0000            A   584    	LD	BC,30
040467 C5                  A   585    	PUSH	BC
040468 CD 5F 29 04         A   586    	CALL	_putch
04046C C1                  A   587    	POP	BC
                           A   588    ;   57	}
                           A   589    .LINE 57
                           A   590    
04046D DDF9                A   591    	LD	SP,IX
04046F DDE1                A   592    	POP	IX
040471 C9                  A   593    	RET	
                           A   594    
                           A   595    
                           A   596    ;**************************** _vdp_cursorHome *
                           A   597    ;Name                         Addr/Register   S
                           A   598    ;_putch                              IMPORT  --
                           A   599    
                           A   600    
                           A   601    ; Stack Frame Size: 6 (bytes)
                           A   602    ;       Spill Code: 0 (instruction)
                           A   603    
                           A   604    
                           A   605    .ENDFUNC "vdp_cursorHome",57,"_vdp_cursorHome"
                           A   606    ;   58	
                           A   607    ;   59	void vdp_cursorUp()
                           A   608    ;   60	{
040472                     A   609    _vdp_cursorUp:
                           A   610    .DEFINE "_vdp_cursorUp"
                           A   611    
                           A   612    .VALUE _vdp_cursorUp
                           A   613    
                           A   614    .CLASS 2
                           A   615    
                           A   616    .TYPE 65
                           A   617    
                           A   618    .ENDEF
                           A   619    
                           A   620    .BEGFUNC "vdp_cursorUp",60,"_vdp_cursorUp"
                           A   621    
040472 DDE5                A   622    	PUSH	IX
040474 DD210000 00         A   623    	LD	IX,0
040479 DD39                A   624    	ADD	IX,SP
                           A   625    ;   61	    putch(11);
                           A   626    .LINE 61
                           A   627    
04047B 010B0000            A   628    	LD	BC,11
04047F C5                  A   629    	PUSH	BC
040480 CD 5F 29 04         A   630    	CALL	_putch
040484 C1                  A   631    	POP	BC
                           A   632    ;   62	}
                           A   633    .LINE 62
                           A   634    
040485 DDF9                A   635    	LD	SP,IX
040487 DDE1                A   636    	POP	IX
040489 C9                  A   637    	RET	
                           A   638    
                           A   639    
                           A   640    ;**************************** _vdp_cursorUp ***
                           A   641    ;Name                         Addr/Register   S
                           A   642    ;_putch                              IMPORT  --
                           A   643    
                           A   644    
                           A   645    ; Stack Frame Size: 6 (bytes)
                           A   646    ;       Spill Code: 0 (instruction)
                           A   647    
                           A   648    
                           A   649    .ENDFUNC "vdp_cursorUp",62,"_vdp_cursorUp"
                           A   650    ;   63	
                           A   651    ;   64	void vdp_cursorGoto(unsigned char x, un
                           A   652    ;   65	{
04048A                     A   653    _vdp_cursorGoto:
                           A   654    .DEFINE "_vdp_cursorGoto"
                           A   655    
                           A   656    .VALUE _vdp_cursorGoto
                           A   657    
                           A   658    .CLASS 2
                           A   659    
                           A   660    .TYPE 65
                           A   661    
                           A   662    .ENDEF
                           A   663    
                           A   664    .BEGFUNC "vdp_cursorGoto",65,"_vdp_cursorGoto"
                           A   665    
                           A   666    .LINE 65
                           A   667    
                           A   668    .DEFINE "x"
                           A   669    
                           A   670    .CLASS 65
                           A   671    
                           A   672    .VALUE 6
                           A   673    
                           A   674    .TYPE 12
                           A   675    
                           A   676    .ENDEF
                           A   677    
                           A   678    .DEFINE "y"
                           A   679    
                           A   680    .CLASS 65
                           A   681    
                           A   682    .VALUE 9
                           A   683    
                           A   684    .TYPE 12
                           A   685    
                           A   686    .ENDEF
                           A   687    
04048A DDE5                A   688    	PUSH	IX
04048C DD210000 00         A   689    	LD	IX,0
040491 DD39                A   690    	ADD	IX,SP
                           A   691    ;   66	    putch(31); // TAB
                           A   692    .LINE 66
                           A   693    
040493 011F0000            A   694    	LD	BC,31
040497 C5                  A   695    	PUSH	BC
040498 CD 5F 29 04         A   696    	CALL	_putch
04049C C1                  A   697    	POP	BC
                           A   698    ;   67	    putch(x);
                           A   699    .LINE 67
                           A   700    
04049D DD7E06              A   701    	LD	A,(IX+%6)
0404A0 B7ED62              A   702    	UEXT	HL
0404A3 6F                  A   703    	LD	L,A
0404A4 E5                  A   704    	PUSH	HL
0404A5 CD 5F 29 04         A   705    	CALL	_putch
0404A9 C1                  A   706    	POP	BC
                           A   707    ;   68	    putch(y);
                           A   708    .LINE 68
                           A   709    
0404AA DD7E09              A   710    	LD	A,(IX+%9)
0404AD B7ED62              A   711    	UEXT	HL
0404B0 6F                  A   712    	LD	L,A
0404B1 E5                  A   713    	PUSH	HL
0404B2 CD 5F 29 04         A   714    	CALL	_putch
0404B6 C1                  A   715    	POP	BC
                           A   716    ;   69	}
                           A   717    .LINE 69
                           A   718    
0404B7 DDF9                A   719    	LD	SP,IX
0404B9 DDE1                A   720    	POP	IX
0404BB C9                  A   721    	RET	
                           A   722    
                           A   723    
                           A   724    ;**************************** _vdp_cursorGoto *
                           A   725    ;Name                         Addr/Register   S
                           A   726    ;_putch                              IMPORT  --
                           A   727    ;y                                     IX+9    
                           A   728    ;x                                     IX+6    
                           A   729    
                           A   730    
                           A   731    ; Stack Frame Size: 12 (bytes)
                           A   732    ;       Spill Code: 0 (instruction)
                           A   733    
                           A   734    
                           A   735    .ENDFUNC "vdp_cursorGoto",69,"_vdp_cursorGoto"
                           A   736    ;   70	
                           A   737    ;   71	/*
                           A   738    ;   72	void vdp_colour(unsigned char foregroun
                           A   739    ;   73	{
                           A   740    ;   74	    putch(17); // COLOUR
                           A   741    ;   75	    putch(!foreground);
                           A   742    ;   76	    putch(r);
                           A   743    ;   77	    putch(g);
                           A   744    ;   78	    putch(b);
                           A   745    ;   79	}
                           A   746    ;   80	
                           A   747    ;   81	void vdp_fgcolour(unsigned char r, unsi
                           A   748    ;   82	{
                           A   749    ;   83	    vdp_colour(1,r,g,b);
                           A   750    ;   84	}
                           A   751    ;   85	
                           A   752    ;   86	void vdp_bgcolour(unsigned char r, unsi
                           A   753    ;   87	{
                           A   754    ;   88	    vdp_colour(0,r,g,b);
                           A   755    ;   89	}
                           A   756    ;   90	*/
                           A   757    ;   91	
                           A   758    ;   92	void vdp_fgcolour(unsigned char colorin
0404BC                     A   759    _vdp_fgcolour:
                           A   760    .DEFINE "_vdp_fgcolour"
                           A   761    
                           A   762    .VALUE _vdp_fgcolour
                           A   763    
                           A   764    .CLASS 2
                           A   765    
                           A   766    .TYPE 65
                           A   767    
                           A   768    .ENDEF
                           A   769    
                           A   770    .BEGFUNC "vdp_fgcolour",92,"_vdp_fgcolour"
                           A   771    
                           A   772    .LINE 92
                           A   773    
                           A   774    .DEFINE "colorindex"
                           A   775    
                           A   776    .CLASS 65
                           A   777    
                           A   778    .VALUE 6
                           A   779    
                           A   780    .TYPE 12
                           A   781    
                           A   782    .ENDEF
                           A   783    
0404BC DDE5                A   784    	PUSH	IX
0404BE DD210000 00         A   785    	LD	IX,0
0404C3 DD39                A   786    	ADD	IX,SP
                           A   787    ;   93		putch(17); // COLOUR
                           A   788    .LINE 93
                           A   789    
0404C5 01110000            A   790    	LD	BC,17
0404C9 C5                  A   791    	PUSH	BC
0404CA CD 5F 29 04         A   792    	CALL	_putch
0404CE C1                  A   793    	POP	BC
                           A   794    ;   94		putch(colorindex);	
                           A   795    .LINE 94
                           A   796    
0404CF DD7E06              A   797    	LD	A,(IX+%6)
0404D2 B7ED62              A   798    	UEXT	HL
0404D5 6F                  A   799    	LD	L,A
0404D6 E5                  A   800    	PUSH	HL
0404D7 CD 5F 29 04         A   801    	CALL	_putch
0404DB C1                  A   802    	POP	BC
                           A   803    ;   95	}
                           A   804    .LINE 95
                           A   805    
0404DC DDF9                A   806    	LD	SP,IX
0404DE DDE1                A   807    	POP	IX
0404E0 C9                  A   808    	RET	
                           A   809    
                           A   810    
                           A   811    ;**************************** _vdp_fgcolour ***
                           A   812    ;Name                         Addr/Register   S
                           A   813    ;_putch                              IMPORT  --
                           A   814    ;colorindex                            IX+6    
                           A   815    
                           A   816    
                           A   817    ; Stack Frame Size: 9 (bytes)
                           A   818    ;       Spill Code: 0 (instruction)
                           A   819    
                           A   820    
                           A   821    .ENDFUNC "vdp_fgcolour",95,"_vdp_fgcolour"
                           A   822    ;   96	
                           A   823    ;   97	void vdp_bgcolour(unsigned char colorin
0404E1                     A   824    _vdp_bgcolour:
                           A   825    .DEFINE "_vdp_bgcolour"
                           A   826    
                           A   827    .VALUE _vdp_bgcolour
                           A   828    
                           A   829    .CLASS 2
                           A   830    
                           A   831    .TYPE 65
                           A   832    
                           A   833    .ENDEF
                           A   834    
                           A   835    .BEGFUNC "vdp_bgcolour",97,"_vdp_bgcolour"
                           A   836    
                           A   837    .LINE 97
                           A   838    
                           A   839    .DEFINE "colorindex"
                           A   840    
                           A   841    .CLASS 65
                           A   842    
                           A   843    .VALUE 6
                           A   844    
                           A   845    .TYPE 12
                           A   846    
                           A   847    .ENDEF
                           A   848    
0404E1 DDE5                A   849    	PUSH	IX
0404E3 DD210000 00         A   850    	LD	IX,0
0404E8 DD39                A   851    	ADD	IX,SP
                           A   852    ;   98		putch(17); // COLOUR
                           A   853    .LINE 98
                           A   854    
0404EA 01110000            A   855    	LD	BC,17
0404EE C5                  A   856    	PUSH	BC
0404EF CD 5F 29 04         A   857    	CALL	_putch
0404F3 C1                  A   858    	POP	BC
                           A   859    ;   99		putch(colorindex | 0x80);	
                           A   860    .LINE 99
                           A   861    
0404F4 DD7E06              A   862    	LD	A,(IX+%6)
0404F7 B7ED62              A   863    	UEXT	HL
0404FA 6F                  A   864    	LD	L,A
0404FB 01800000            A   865    	LD	BC,128
0404FF CD 92 2F 04         A   866    	CALL	__ior
040503 E5                  A   867    	PUSH	HL
040504 CD 5F 29 04         A   868    	CALL	_putch
040508 C1                  A   869    	POP	BC
                           A   870    ;  100	}
                           A   871    .LINE 100
                           A   872    
040509 DDF9                A   873    	LD	SP,IX
04050B DDE1                A   874    	POP	IX
04050D C9                  A   875    	RET	
                           A   876    
                           A   877    
                           A   878    ;**************************** _vdp_bgcolour ***
                           A   879    ;Name                         Addr/Register   S
                           A   880    ;_putch                              IMPORT  --
                           A   881    ;colorindex                            IX+6    
                           A   882    
                           A   883    
                           A   884    ; Stack Frame Size: 9 (bytes)
                           A   885    ;       Spill Code: 0 (instruction)
                           A   886    
                           A   887    
                           A   888    .ENDFUNC "vdp_bgcolour",100,"_vdp_bgcolour"
                           A   889    ;  101	
                           A   890    ;  102	//
                           A   891    ;  103	// Graphics functions
                           A   892    ;  104	//
                           A   893    ;  105	
                           A   894    ;  106	void vdp_clearGraphics()
                           A   895    ;  107	{
04050E                     A   896    _vdp_clearGraphics:
                           A   897    .DEFINE "_vdp_clearGraphics"
                           A   898    
                           A   899    .VALUE _vdp_clearGraphics
                           A   900    
                           A   901    .CLASS 2
                           A   902    
                           A   903    .TYPE 65
                           A   904    
                           A   905    .ENDEF
                           A   906    
                           A   907    .BEGFUNC "vdp_clearGraphics",107,"_vdp_clearGra
                           A   908    
04050E DDE5                A   909    	PUSH	IX
040510 DD210000 00         A   910    	LD	IX,0
040515 DD39                A   911    	ADD	IX,SP
                           A   912    ;  108	    putch(16);    
                           A   913    .LINE 108
                           A   914    
040517 01100000            A   915    	LD	BC,16
04051B C5                  A   916    	PUSH	BC
04051C CD 5F 29 04         A   917    	CALL	_putch
040520 C1                  A   918    	POP	BC
                           A   919    ;  109	}
                           A   920    .LINE 109
                           A   921    
040521 DDF9                A   922    	LD	SP,IX
040523 DDE1                A   923    	POP	IX
040525 C9                  A   924    	RET	
                           A   925    
                           A   926    
                           A   927    ;**************************** _vdp_clearGraphic
                           A   928    ;Name                         Addr/Register   S
                           A   929    ;_putch                              IMPORT  --
                           A   930    
                           A   931    
                           A   932    ; Stack Frame Size: 6 (bytes)
                           A   933    ;       Spill Code: 0 (instruction)
                           A   934    
                           A   935    
                           A   936    .ENDFUNC "vdp_clearGraphics",109,"_vdp_clearGra
                           A   937    ;  110	
                           A   938    ;  111	/*
                           A   939    ;  112	void vdp_plotColour(unsigned char r, un
                           A   940    ;  113	{
                           A   941    ;  114	    putch(18); // GCOL
                           A   942    ;  115	    putch(0);
                           A   943    ;  116	    putch(r);
                           A   944    ;  117	    putch(g);
                           A   945    ;  118	    putch(b);
                           A   946    ;  119	}
                           A   947    ;  120	*/
                           A   948    ;  121	void vdp_plotColour(unsigned char color
                           A   949    ;  122	{
040526                     A   950    _vdp_plotColour:
                           A   951    .DEFINE "_vdp_plotColour"
                           A   952    
                           A   953    .VALUE _vdp_plotColour
                           A   954    
                           A   955    .CLASS 2
                           A   956    
                           A   957    .TYPE 65
                           A   958    
                           A   959    .ENDEF
                           A   960    
                           A   961    .BEGFUNC "vdp_plotColour",122,"_vdp_plotColour"
                           A   962    
                           A   963    .LINE 122
                           A   964    
                           A   965    .DEFINE "colorindex"
                           A   966    
                           A   967    .CLASS 65
                           A   968    
                           A   969    .VALUE 6
                           A   970    
                           A   971    .TYPE 12
                           A   972    
                           A   973    .ENDEF
                           A   974    
040526 DDE5                A   975    	PUSH	IX
040528 DD210000 00         A   976    	LD	IX,0
04052D DD39                A   977    	ADD	IX,SP
                           A   978    ;  123	    putch(18); // GCOL
                           A   979    .LINE 123
                           A   980    
04052F 01120000            A   981    	LD	BC,18
040533 C5                  A   982    	PUSH	BC
040534 CD 5F 29 04         A   983    	CALL	_putch
040538 C1                  A   984    	POP	BC
                           A   985    ;  124	    putch(1);
                           A   986    .LINE 124
                           A   987    
040539 01010000            A   988    	LD	BC,1
04053D C5                  A   989    	PUSH	BC
04053E CD 5F 29 04         A   990    	CALL	_putch
040542 C1                  A   991    	POP	BC
                           A   992    ;  125		putch(colorindex);
                           A   993    .LINE 125
                           A   994    
040543 DD7E06              A   995    	LD	A,(IX+%6)
040546 B7ED62              A   996    	UEXT	HL
040549 6F                  A   997    	LD	L,A
04054A E5                  A   998    	PUSH	HL
04054B CD 5F 29 04         A   999    	CALL	_putch
04054F C1                  A  1000    	POP	BC
                           A  1001    ;  126	}
                           A  1002    .LINE 126
                           A  1003    
040550 DDF9                A  1004    	LD	SP,IX
040552 DDE1                A  1005    	POP	IX
040554 C9                  A  1006    	RET	
                           A  1007    
                           A  1008    
                           A  1009    ;**************************** _vdp_plotColour *
                           A  1010    ;Name                         Addr/Register   S
                           A  1011    ;_putch                              IMPORT  --
                           A  1012    ;colorindex                            IX+6    
                           A  1013    
                           A  1014    
                           A  1015    ; Stack Frame Size: 9 (bytes)
                           A  1016    ;       Spill Code: 0 (instruction)
                           A  1017    
                           A  1018    
                           A  1019    .ENDFUNC "vdp_plotColour",126,"_vdp_plotColour"
                           A  1020    ;  127	
                           A  1021    ;  128	// internal function
                           A  1022    ;  129	void vdp_plot(unsigned char mode, unsig
                           A  1023    ;  130	{
040555                     A  1024    _vdp_plot:
                           A  1025    .DEFINE "_vdp_plot"
                           A  1026    
                           A  1027    .VALUE _vdp_plot
                           A  1028    
                           A  1029    .CLASS 2
                           A  1030    
                           A  1031    .TYPE 65
                           A  1032    
                           A  1033    .ENDEF
                           A  1034    
                           A  1035    .BEGFUNC "vdp_plot",130,"_vdp_plot"
                           A  1036    
                           A  1037    .LINE 130
                           A  1038    
                           A  1039    .DEFINE "mode"
                           A  1040    
                           A  1041    .CLASS 65
                           A  1042    
                           A  1043    .VALUE 6
                           A  1044    
                           A  1045    .TYPE 12
                           A  1046    
                           A  1047    .ENDEF
                           A  1048    
                           A  1049    .DEFINE "x"
                           A  1050    
                           A  1051    .CLASS 65
                           A  1052    
                           A  1053    .VALUE 9
                           A  1054    
                           A  1055    .TYPE 14
                           A  1056    
                           A  1057    .ENDEF
                           A  1058    
                           A  1059    .DEFINE "y"
                           A  1060    
                           A  1061    .CLASS 65
                           A  1062    
                           A  1063    .VALUE 12
                           A  1064    
                           A  1065    .TYPE 14
                           A  1066    
                           A  1067    .ENDEF
                           A  1068    
040555 DDE5                A  1069    	PUSH	IX
040557 DD210000 00         A  1070    	LD	IX,0
04055C DD39                A  1071    	ADD	IX,SP
                           A  1072    ;  131	    putch(25); // PLOT
                           A  1073    .LINE 131
                           A  1074    
04055E 01190000            A  1075    	LD	BC,25
040562 C5                  A  1076    	PUSH	BC
040563 CD 5F 29 04         A  1077    	CALL	_putch
040567 C1                  A  1078    	POP	BC
                           A  1079    ;  132	    putch(mode);
                           A  1080    .LINE 132
                           A  1081    
040568 DD7E06              A  1082    	LD	A,(IX+%6)
04056B B7ED62              A  1083    	UEXT	HL
04056E 6F                  A  1084    	LD	L,A
04056F E5                  A  1085    	PUSH	HL
040570 CD 5F 29 04         A  1086    	CALL	_putch
040574 C1                  A  1087    	POP	BC
                           A  1088    ;  133	    putch(x & 0xFF);
                           A  1089    .LINE 133
                           A  1090    
040575 DD7E09              A  1091    	LD	A,(IX+%9)
040578 B7ED62              A  1092    	UEXT	HL
04057B 6F                  A  1093    	LD	L,A
04057C E5                  A  1094    	PUSH	HL
04057D CD 5F 29 04         A  1095    	CALL	_putch
040581 C1                  A  1096    	POP	BC
                           A  1097    ;  134	    putch(x >> 8);
                           A  1098    .LINE 134
                           A  1099    
040582 DD2709              A  1100    	LD	HL,(IX+%9)
040585 3E08                A  1101    	LD	A,%8
040587 CD A3 36 04         A  1102    	CALL	__ishru_b
04058B E5                  A  1103    	PUSH	HL
04058C CD 5F 29 04         A  1104    	CALL	_putch
040590 C1                  A  1105    	POP	BC
                           A  1106    ;  135	    putch(y & 0xFF);
                           A  1107    .LINE 135
                           A  1108    
040591 DD7E0C              A  1109    	LD	A,(IX+%C)
040594 B7ED62              A  1110    	UEXT	HL
040597 6F                  A  1111    	LD	L,A
040598 E5                  A  1112    	PUSH	HL
040599 CD 5F 29 04         A  1113    	CALL	_putch
04059D C1                  A  1114    	POP	BC
                           A  1115    ;  136	    putch(y >> 8);
                           A  1116    .LINE 136
                           A  1117    
04059E DD270C              A  1118    	LD	HL,(IX+%C)
0405A1 3E08                A  1119    	LD	A,%8
0405A3 CD A3 36 04         A  1120    	CALL	__ishru_b
0405A7 E5                  A  1121    	PUSH	HL
0405A8 CD 5F 29 04         A  1122    	CALL	_putch
0405AC C1                  A  1123    	POP	BC
                           A  1124    ;  137	}
                           A  1125    .LINE 137
                           A  1126    
0405AD DDF9                A  1127    	LD	SP,IX
0405AF DDE1                A  1128    	POP	IX
0405B1 C9                  A  1129    	RET	
                           A  1130    
                           A  1131    
                           A  1132    ;**************************** _vdp_plot *******
                           A  1133    ;Name                         Addr/Register   S
                           A  1134    ;_putch                              IMPORT  --
                           A  1135    ;y                                    IX+12    
                           A  1136    ;x                                     IX+9    
                           A  1137    ;mode                                  IX+6    
                           A  1138    
                           A  1139    
                           A  1140    ; Stack Frame Size: 15 (bytes)
                           A  1141    ;       Spill Code: 0 (instruction)
                           A  1142    
                           A  1143    
                           A  1144    .ENDFUNC "vdp_plot",137,"_vdp_plot"
                           A  1145    ;  138	
                           A  1146    ;  139	void vdp_plotMoveTo(unsigned int x, uns
                           A  1147    ;  140	{
0405B2                     A  1148    _vdp_plotMoveTo:
                           A  1149    .DEFINE "_vdp_plotMoveTo"
                           A  1150    
                           A  1151    .VALUE _vdp_plotMoveTo
                           A  1152    
                           A  1153    .CLASS 2
                           A  1154    
                           A  1155    .TYPE 65
                           A  1156    
                           A  1157    .ENDEF
                           A  1158    
                           A  1159    .BEGFUNC "vdp_plotMoveTo",140,"_vdp_plotMoveTo"
                           A  1160    
                           A  1161    .LINE 140
                           A  1162    
                           A  1163    .DEFINE "x"
                           A  1164    
                           A  1165    .CLASS 65
                           A  1166    
                           A  1167    .VALUE 6
                           A  1168    
                           A  1169    .TYPE 14
                           A  1170    
                           A  1171    .ENDEF
                           A  1172    
                           A  1173    .DEFINE "y"
                           A  1174    
                           A  1175    .CLASS 65
                           A  1176    
                           A  1177    .VALUE 9
                           A  1178    
                           A  1179    .TYPE 14
                           A  1180    
                           A  1181    .ENDEF
                           A  1182    
0405B2 DDE5                A  1183    	PUSH	IX
0405B4 DD210000 00         A  1184    	LD	IX,0
0405B9 DD39                A  1185    	ADD	IX,SP
                           A  1186    ;  141		vdp_plot(0x04,x,y);
                           A  1187    .LINE 141
                           A  1188    
0405BB DD0709              A  1189    	LD	BC,(IX+%9)
0405BE C5                  A  1190    	PUSH	BC
0405BF DD0706              A  1191    	LD	BC,(IX+%6)
0405C2 C5                  A  1192    	PUSH	BC
0405C3 01040000            A  1193    	LD	BC,4
0405C7 C5                  A  1194    	PUSH	BC
0405C8 CD 55 05 04         A  1195    	CALL	_vdp_plot
0405CC C1                  A  1196    	POP	BC
0405CD C1                  A  1197    	POP	BC
0405CE C1                  A  1198    	POP	BC
                           A  1199    ;  142	}
                           A  1200    .LINE 142
                           A  1201    
0405CF DDF9                A  1202    	LD	SP,IX
0405D1 DDE1                A  1203    	POP	IX
0405D3 C9                  A  1204    	RET	
                           A  1205    
                           A  1206    
                           A  1207    ;**************************** _vdp_plotMoveTo *
                           A  1208    ;Name                         Addr/Register   S
                           A  1209    ;y                                     IX+9    
                           A  1210    ;x                                     IX+6    
                           A  1211    
                           A  1212    
                           A  1213    ; Stack Frame Size: 12 (bytes)
                           A  1214    ;       Spill Code: 0 (instruction)
                           A  1215    
                           A  1216    
                           A  1217    .ENDFUNC "vdp_plotMoveTo",142,"_vdp_plotMoveTo"
                           A  1218    ;  143	
                           A  1219    ;  144	void vdp_plotLineTo(unsigned int x, uns
                           A  1220    ;  145	{
0405D4                     A  1221    _vdp_plotLineTo:
                           A  1222    .DEFINE "_vdp_plotLineTo"
                           A  1223    
                           A  1224    .VALUE _vdp_plotLineTo
                           A  1225    
                           A  1226    .CLASS 2
                           A  1227    
                           A  1228    .TYPE 65
                           A  1229    
                           A  1230    .ENDEF
                           A  1231    
                           A  1232    .BEGFUNC "vdp_plotLineTo",145,"_vdp_plotLineTo"
                           A  1233    
                           A  1234    .LINE 145
                           A  1235    
                           A  1236    .DEFINE "x"
                           A  1237    
                           A  1238    .CLASS 65
                           A  1239    
                           A  1240    .VALUE 6
                           A  1241    
                           A  1242    .TYPE 14
                           A  1243    
                           A  1244    .ENDEF
                           A  1245    
                           A  1246    .DEFINE "y"
                           A  1247    
                           A  1248    .CLASS 65
                           A  1249    
                           A  1250    .VALUE 9
                           A  1251    
                           A  1252    .TYPE 14
                           A  1253    
                           A  1254    .ENDEF
                           A  1255    
0405D4 DDE5                A  1256    	PUSH	IX
0405D6 DD210000 00         A  1257    	LD	IX,0
0405DB DD39                A  1258    	ADD	IX,SP
                           A  1259    ;  146		vdp_plot(0x05,x,y);
                           A  1260    .LINE 146
                           A  1261    
0405DD DD0709              A  1262    	LD	BC,(IX+%9)
0405E0 C5                  A  1263    	PUSH	BC
0405E1 DD0706              A  1264    	LD	BC,(IX+%6)
0405E4 C5                  A  1265    	PUSH	BC
0405E5 01050000            A  1266    	LD	BC,5
0405E9 C5                  A  1267    	PUSH	BC
0405EA CD 55 05 04         A  1268    	CALL	_vdp_plot
0405EE C1                  A  1269    	POP	BC
0405EF C1                  A  1270    	POP	BC
0405F0 C1                  A  1271    	POP	BC
                           A  1272    ;  147	}
                           A  1273    .LINE 147
                           A  1274    
0405F1 DDF9                A  1275    	LD	SP,IX
0405F3 DDE1                A  1276    	POP	IX
0405F5 C9                  A  1277    	RET	
                           A  1278    
                           A  1279    
                           A  1280    ;**************************** _vdp_plotLineTo *
                           A  1281    ;Name                         Addr/Register   S
                           A  1282    ;y                                     IX+9    
                           A  1283    ;x                                     IX+6    
                           A  1284    
                           A  1285    
                           A  1286    ; Stack Frame Size: 12 (bytes)
                           A  1287    ;       Spill Code: 0 (instruction)
                           A  1288    
                           A  1289    
                           A  1290    .ENDFUNC "vdp_plotLineTo",147,"_vdp_plotLineTo"
                           A  1291    ;  148	
                           A  1292    ;  149	void vdp_plotPoint(unsigned int x, unsi
                           A  1293    ;  150	{
0405F6                     A  1294    _vdp_plotPoint:
                           A  1295    .DEFINE "_vdp_plotPoint"
                           A  1296    
                           A  1297    .VALUE _vdp_plotPoint
                           A  1298    
                           A  1299    .CLASS 2
                           A  1300    
                           A  1301    .TYPE 65
                           A  1302    
                           A  1303    .ENDEF
                           A  1304    
                           A  1305    .BEGFUNC "vdp_plotPoint",150,"_vdp_plotPoint"
                           A  1306    
                           A  1307    .LINE 150
                           A  1308    
                           A  1309    .DEFINE "x"
                           A  1310    
                           A  1311    .CLASS 65
                           A  1312    
                           A  1313    .VALUE 6
                           A  1314    
                           A  1315    .TYPE 14
                           A  1316    
                           A  1317    .ENDEF
                           A  1318    
                           A  1319    .DEFINE "y"
                           A  1320    
                           A  1321    .CLASS 65
                           A  1322    
                           A  1323    .VALUE 9
                           A  1324    
                           A  1325    .TYPE 14
                           A  1326    
                           A  1327    .ENDEF
                           A  1328    
0405F6 DDE5                A  1329    	PUSH	IX
0405F8 DD210000 00         A  1330    	LD	IX,0
0405FD DD39                A  1331    	ADD	IX,SP
                           A  1332    ;  151		vdp_plot(0x40,x,y);
                           A  1333    .LINE 151
                           A  1334    
0405FF DD0709              A  1335    	LD	BC,(IX+%9)
040602 C5                  A  1336    	PUSH	BC
040603 DD0706              A  1337    	LD	BC,(IX+%6)
040606 C5                  A  1338    	PUSH	BC
040607 01400000            A  1339    	LD	BC,64
04060B C5                  A  1340    	PUSH	BC
04060C CD 55 05 04         A  1341    	CALL	_vdp_plot
040610 C1                  A  1342    	POP	BC
040611 C1                  A  1343    	POP	BC
040612 C1                  A  1344    	POP	BC
                           A  1345    ;  152	}
                           A  1346    .LINE 152
                           A  1347    
040613 DDF9                A  1348    	LD	SP,IX
040615 DDE1                A  1349    	POP	IX
040617 C9                  A  1350    	RET	
                           A  1351    
                           A  1352    
                           A  1353    ;**************************** _vdp_plotPoint **
                           A  1354    ;Name                         Addr/Register   S
                           A  1355    ;y                                     IX+9    
                           A  1356    ;x                                     IX+6    
                           A  1357    
                           A  1358    
                           A  1359    ; Stack Frame Size: 12 (bytes)
                           A  1360    ;       Spill Code: 0 (instruction)
                           A  1361    
                           A  1362    
                           A  1363    .ENDFUNC "vdp_plotPoint",152,"_vdp_plotPoint"
                           A  1364    ;  153	
                           A  1365    ;  154	void vdp_plotTriangle(unsigned int x, u
                           A  1366    ;  155	{
040618                     A  1367    _vdp_plotTriangle:
                           A  1368    .DEFINE "_vdp_plotTriangle"
                           A  1369    
                           A  1370    .VALUE _vdp_plotTriangle
                           A  1371    
                           A  1372    .CLASS 2
                           A  1373    
                           A  1374    .TYPE 65
                           A  1375    
                           A  1376    .ENDEF
                           A  1377    
                           A  1378    .BEGFUNC "vdp_plotTriangle",155,"_vdp_plotTrian
                           A  1379    
                           A  1380    .LINE 155
                           A  1381    
                           A  1382    .DEFINE "x"
                           A  1383    
                           A  1384    .CLASS 65
                           A  1385    
                           A  1386    .VALUE 6
                           A  1387    
                           A  1388    .TYPE 14
                           A  1389    
                           A  1390    .ENDEF
                           A  1391    
                           A  1392    .DEFINE "y"
                           A  1393    
                           A  1394    .CLASS 65
                           A  1395    
                           A  1396    .VALUE 9
                           A  1397    
                           A  1398    .TYPE 14
                           A  1399    
                           A  1400    .ENDEF
                           A  1401    
040618 DDE5                A  1402    	PUSH	IX
04061A DD210000 00         A  1403    	LD	IX,0
04061F DD39                A  1404    	ADD	IX,SP
                           A  1405    ;  156		vdp_plot(0x50,x,y);
                           A  1406    .LINE 156
                           A  1407    
040621 DD0709              A  1408    	LD	BC,(IX+%9)
040624 C5                  A  1409    	PUSH	BC
040625 DD0706              A  1410    	LD	BC,(IX+%6)
040628 C5                  A  1411    	PUSH	BC
040629 01500000            A  1412    	LD	BC,80
04062D C5                  A  1413    	PUSH	BC
04062E CD 55 05 04         A  1414    	CALL	_vdp_plot
040632 C1                  A  1415    	POP	BC
040633 C1                  A  1416    	POP	BC
040634 C1                  A  1417    	POP	BC
                           A  1418    ;  157	}
                           A  1419    .LINE 157
                           A  1420    
040635 DDF9                A  1421    	LD	SP,IX
040637 DDE1                A  1422    	POP	IX
040639 C9                  A  1423    	RET	
                           A  1424    
                           A  1425    
                           A  1426    ;**************************** _vdp_plotTriangle
                           A  1427    ;Name                         Addr/Register   S
                           A  1428    ;y                                     IX+9    
                           A  1429    ;x                                     IX+6    
                           A  1430    
                           A  1431    
                           A  1432    ; Stack Frame Size: 12 (bytes)
                           A  1433    ;       Spill Code: 0 (instruction)
                           A  1434    
                           A  1435    
                           A  1436    .ENDFUNC "vdp_plotTriangle",157,"_vdp_plotTrian
                           A  1437    ;  158	
                           A  1438    ;  159	void vdp_plotCircleRadius(unsigned int 
                           A  1439    ;  160	{
04063A                     A  1440    _vdp_plotCircleRadius:
                           A  1441    .DEFINE "_vdp_plotCircleRadius"
                           A  1442    
                           A  1443    .VALUE _vdp_plotCircleRadius
                           A  1444    
                           A  1445    .CLASS 2
                           A  1446    
                           A  1447    .TYPE 65
                           A  1448    
                           A  1449    .ENDEF
                           A  1450    
                           A  1451    .BEGFUNC "vdp_plotCircleRadius",160,"_vdp_plotC
                           A  1452    
                           A  1453    .LINE 160
                           A  1454    
                           A  1455    .DEFINE "r"
                           A  1456    
                           A  1457    .CLASS 65
                           A  1458    
                           A  1459    .VALUE 6
                           A  1460    
                           A  1461    .TYPE 14
                           A  1462    
                           A  1463    .ENDEF
                           A  1464    
04063A DDE5                A  1465    	PUSH	IX
04063C DD210000 00         A  1466    	LD	IX,0
040641 DD39                A  1467    	ADD	IX,SP
                           A  1468    ;  161		vdp_plot(0x90,r,0);
                           A  1469    .LINE 161
                           A  1470    
040643 01000000            A  1471    	LD	BC,0
040647 C5                  A  1472    	PUSH	BC
040648 DD0706              A  1473    	LD	BC,(IX+%6)
04064B C5                  A  1474    	PUSH	BC
04064C 01900000            A  1475    	LD	BC,144
040650 C5                  A  1476    	PUSH	BC
040651 CD 55 05 04         A  1477    	CALL	_vdp_plot
040655 C1                  A  1478    	POP	BC
040656 C1                  A  1479    	POP	BC
040657 C1                  A  1480    	POP	BC
                           A  1481    ;  162	}
                           A  1482    .LINE 162
                           A  1483    
040658 DDF9                A  1484    	LD	SP,IX
04065A DDE1                A  1485    	POP	IX
04065C C9                  A  1486    	RET	
                           A  1487    
                           A  1488    
                           A  1489    ;**************************** _vdp_plotCircleRa
                           A  1490    ;Name                         Addr/Register   S
                           A  1491    ;r                                     IX+6    
                           A  1492    
                           A  1493    
                           A  1494    ; Stack Frame Size: 9 (bytes)
                           A  1495    ;       Spill Code: 0 (instruction)
                           A  1496    
                           A  1497    
                           A  1498    .ENDFUNC "vdp_plotCircleRadius",162,"_vdp_plotC
                           A  1499    ;  163	
                           A  1500    ;  164	void vdp_plotCircleCircumference(unsign
                           A  1501    ;  165	{
04065D                     A  1502    _vdp_plotCircleCircumference:
                           A  1503    .DEFINE "_vdp_plotCircleCircumference"
                           A  1504    
                           A  1505    .VALUE _vdp_plotCircleCircumference
                           A  1506    
                           A  1507    .CLASS 2
                           A  1508    
                           A  1509    .TYPE 65
                           A  1510    
                           A  1511    .ENDEF
                           A  1512    
                           A  1513    .BEGFUNC "vdp_plotCircleCircumference",165,"_vd
                           A  1514    
                           A  1515    .LINE 165
                           A  1516    
                           A  1517    .DEFINE "x"
                           A  1518    
                           A  1519    .CLASS 65
                           A  1520    
                           A  1521    .VALUE 6
                           A  1522    
                           A  1523    .TYPE 14
                           A  1524    
                           A  1525    .ENDEF
                           A  1526    
                           A  1527    .DEFINE "y"
                           A  1528    
                           A  1529    .CLASS 65
                           A  1530    
                           A  1531    .VALUE 9
                           A  1532    
                           A  1533    .TYPE 14
                           A  1534    
                           A  1535    .ENDEF
                           A  1536    
04065D DDE5                A  1537    	PUSH	IX
04065F DD210000 00         A  1538    	LD	IX,0
040664 DD39                A  1539    	ADD	IX,SP
                           A  1540    ;  166		vdp_plot(0x95,x,y);
                           A  1541    .LINE 166
                           A  1542    
040666 DD0709              A  1543    	LD	BC,(IX+%9)
040669 C5                  A  1544    	PUSH	BC
04066A DD0706              A  1545    	LD	BC,(IX+%6)
04066D C5                  A  1546    	PUSH	BC
04066E 01950000            A  1547    	LD	BC,149
040672 C5                  A  1548    	PUSH	BC
040673 CD 55 05 04         A  1549    	CALL	_vdp_plot
040677 C1                  A  1550    	POP	BC
040678 C1                  A  1551    	POP	BC
040679 C1                  A  1552    	POP	BC
                           A  1553    ;  167	}
                           A  1554    .LINE 167
                           A  1555    
04067A DDF9                A  1556    	LD	SP,IX
04067C DDE1                A  1557    	POP	IX
04067E C9                  A  1558    	RET	
                           A  1559    
                           A  1560    
                           A  1561    ;**************************** _vdp_plotCircleCi
                           A  1562    ;Name                         Addr/Register   S
                           A  1563    ;y                                     IX+9    
                           A  1564    ;x                                     IX+6    
                           A  1565    
                           A  1566    
                           A  1567    ; Stack Frame Size: 12 (bytes)
                           A  1568    ;       Spill Code: 0 (instruction)
                           A  1569    
                           A  1570    
                           A  1571    .ENDFUNC "vdp_plotCircleCircumference",167,"_vd
                           A  1572    ;  168	
                           A  1573    ;  169	void vdp_plotSetOrigin(unsigned int x, 
                           A  1574    ;  170	{
04067F                     A  1575    _vdp_plotSetOrigin:
                           A  1576    .DEFINE "_vdp_plotSetOrigin"
                           A  1577    
                           A  1578    .VALUE _vdp_plotSetOrigin
                           A  1579    
                           A  1580    .CLASS 2
                           A  1581    
                           A  1582    .TYPE 65
                           A  1583    
                           A  1584    .ENDEF
                           A  1585    
                           A  1586    .BEGFUNC "vdp_plotSetOrigin",170,"_vdp_plotSetO
                           A  1587    
                           A  1588    .LINE 170
                           A  1589    
                           A  1590    .DEFINE "x"
                           A  1591    
                           A  1592    .CLASS 65
                           A  1593    
                           A  1594    .VALUE 6
                           A  1595    
                           A  1596    .TYPE 14
                           A  1597    
                           A  1598    .ENDEF
                           A  1599    
                           A  1600    .DEFINE "y"
                           A  1601    
                           A  1602    .CLASS 65
                           A  1603    
                           A  1604    .VALUE 9
                           A  1605    
                           A  1606    .TYPE 14
                           A  1607    
                           A  1608    .ENDEF
                           A  1609    
04067F DDE5                A  1610    	PUSH	IX
040681 DD210000 00         A  1611    	LD	IX,0
040686 DD39                A  1612    	ADD	IX,SP
                           A  1613    ;  171	    putch(29); //Graphics ORIGIN
                           A  1614    .LINE 171
                           A  1615    
040688 011D0000            A  1616    	LD	BC,29
04068C C5                  A  1617    	PUSH	BC
04068D CD 5F 29 04         A  1618    	CALL	_putch
040691 C1                  A  1619    	POP	BC
                           A  1620    ;  172	    putch(x & 0xF);
                           A  1621    .LINE 172
                           A  1622    
040692 DD7E06              A  1623    	LD	A,(IX+%6)
040695 E60F                A  1624    	AND	A,%F
040697 B7ED62              A  1625    	UEXT	HL
04069A 6F                  A  1626    	LD	L,A
04069B E5                  A  1627    	PUSH	HL
04069C CD 5F 29 04         A  1628    	CALL	_putch
0406A0 C1                  A  1629    	POP	BC
                           A  1630    ;  173	    putch(x >> 8);
                           A  1631    .LINE 173
                           A  1632    
0406A1 DD2706              A  1633    	LD	HL,(IX+%6)
0406A4 3E08                A  1634    	LD	A,%8
0406A6 CD A3 36 04         A  1635    	CALL	__ishru_b
0406AA E5                  A  1636    	PUSH	HL
0406AB CD 5F 29 04         A  1637    	CALL	_putch
0406AF C1                  A  1638    	POP	BC
                           A  1639    ;  174	    putch(y & 0xF);
                           A  1640    .LINE 174
                           A  1641    
0406B0 DD7E09              A  1642    	LD	A,(IX+%9)
0406B3 E60F                A  1643    	AND	A,%F
0406B5 B7ED62              A  1644    	UEXT	HL
0406B8 6F                  A  1645    	LD	L,A
0406B9 E5                  A  1646    	PUSH	HL
0406BA CD 5F 29 04         A  1647    	CALL	_putch
0406BE C1                  A  1648    	POP	BC
                           A  1649    ;  175	    putch(y >> 8);
                           A  1650    .LINE 175
                           A  1651    
0406BF DD2709              A  1652    	LD	HL,(IX+%9)
0406C2 3E08                A  1653    	LD	A,%8
0406C4 CD A3 36 04         A  1654    	CALL	__ishru_b
0406C8 E5                  A  1655    	PUSH	HL
0406C9 CD 5F 29 04         A  1656    	CALL	_putch
0406CD C1                  A  1657    	POP	BC
                           A  1658    ;  176	}
                           A  1659    .LINE 176
                           A  1660    
0406CE DDF9                A  1661    	LD	SP,IX
0406D0 DDE1                A  1662    	POP	IX
0406D2 C9                  A  1663    	RET	
                           A  1664    
                           A  1665    
                           A  1666    ;**************************** _vdp_plotSetOrigi
                           A  1667    ;Name                         Addr/Register   S
                           A  1668    ;_putch                              IMPORT  --
                           A  1669    ;y                                     IX+9    
                           A  1670    ;x                                     IX+6    
                           A  1671    
                           A  1672    
                           A  1673    ; Stack Frame Size: 12 (bytes)
                           A  1674    ;       Spill Code: 0 (instruction)
                           A  1675    
                           A  1676    
                           A  1677    .ENDFUNC "vdp_plotSetOrigin",176,"_vdp_plotSetO
                           A  1678    ;  177	
                           A  1679    ;  178	// Bitmap VDP functions
                           A  1680    ;  179	void vdp_bitmapSelect(UINT8 id)
                           A  1681    ;  180	{
0406D3                     A  1682    _vdp_bitmapSelect:
                           A  1683    .DEFINE "_vdp_bitmapSelect"
                           A  1684    
                           A  1685    .VALUE _vdp_bitmapSelect
                           A  1686    
                           A  1687    .CLASS 2
                           A  1688    
                           A  1689    .TYPE 65
                           A  1690    
                           A  1691    .ENDEF
                           A  1692    
                           A  1693    .BEGFUNC "vdp_bitmapSelect",180,"_vdp_bitmapSel
                           A  1694    
                           A  1695    .LINE 180
                           A  1696    
                           A  1697    .DEFINE "id"
                           A  1698    
                           A  1699    .CLASS 65
                           A  1700    
                           A  1701    .VALUE 6
                           A  1702    
                           A  1703    .TYPE 12
                           A  1704    
                           A  1705    .ENDEF
                           A  1706    
0406D3 DDE5                A  1707    	PUSH	IX
0406D5 DD210000 00         A  1708    	LD	IX,0
0406DA DD39                A  1709    	ADD	IX,SP
                           A  1710    ;  181		putch(23); // vdu_sys
                           A  1711    .LINE 181
                           A  1712    
0406DC 01170000            A  1713    	LD	BC,23
0406E0 C5                  A  1714    	PUSH	BC
0406E1 CD 5F 29 04         A  1715    	CALL	_putch
0406E5 C1                  A  1716    	POP	BC
                           A  1717    ;  182		putch(27); // sprite command
                           A  1718    .LINE 182
                           A  1719    
0406E6 011B0000            A  1720    	LD	BC,27
0406EA C5                  A  1721    	PUSH	BC
0406EB CD 5F 29 04         A  1722    	CALL	_putch
0406EF C1                  A  1723    	POP	BC
                           A  1724    ;  183		putch(0);  // select command
                           A  1725    .LINE 183
                           A  1726    
0406F0 01000000            A  1727    	LD	BC,0
0406F4 C5                  A  1728    	PUSH	BC
0406F5 CD 5F 29 04         A  1729    	CALL	_putch
0406F9 C1                  A  1730    	POP	BC
                           A  1731    ;  184		putch(id); // bitmap_id
                           A  1732    .LINE 184
                           A  1733    
0406FA DD7E06              A  1734    	LD	A,(IX+%6)
0406FD B7ED62              A  1735    	UEXT	HL
040700 6F                  A  1736    	LD	L,A
040701 E5                  A  1737    	PUSH	HL
040702 CD 5F 29 04         A  1738    	CALL	_putch
040706 C1                  A  1739    	POP	BC
                           A  1740    ;  185		return;	
                           A  1741    ;  186	}
                           A  1742    .LINE 186
                           A  1743    
040707 DDF9                A  1744    	LD	SP,IX
040709 DDE1                A  1745    	POP	IX
04070B C9                  A  1746    	RET	
                           A  1747    
                           A  1748    
                           A  1749    ;**************************** _vdp_bitmapSelect
                           A  1750    ;Name                         Addr/Register   S
                           A  1751    ;_putch                              IMPORT  --
                           A  1752    ;id                                    IX+6    
                           A  1753    
                           A  1754    
                           A  1755    ; Stack Frame Size: 9 (bytes)
                           A  1756    ;       Spill Code: 0 (instruction)
                           A  1757    
                           A  1758    
                           A  1759    .ENDFUNC "vdp_bitmapSelect",186,"_vdp_bitmapSel
                           A  1760    ;  187	
                           A  1761    ;  188	void vdp_bitmapSendDataSelected(UINT16 
                           A  1762    ;  189	{
04070C                     A  1763    _vdp_bitmapSendDataSelected:
                           A  1764    .DEFINE "_vdp_bitmapSendDataSelected"
                           A  1765    
                           A  1766    .VALUE _vdp_bitmapSendDataSelected
                           A  1767    
                           A  1768    .CLASS 2
                           A  1769    
                           A  1770    .TYPE 65
                           A  1771    
                           A  1772    .ENDEF
                           A  1773    
                           A  1774    .BEGFUNC "vdp_bitmapSendDataSelected",189,"_vdp
                           A  1775    
                           A  1776    .LINE 189
                           A  1777    
                           A  1778    .DEFINE "width"
                           A  1779    
                           A  1780    .CLASS 65
                           A  1781    
                           A  1782    .VALUE 6
                           A  1783    
                           A  1784    .TYPE 13
                           A  1785    
                           A  1786    .ENDEF
                           A  1787    
                           A  1788    .DEFINE "height"
                           A  1789    
                           A  1790    .CLASS 65
                           A  1791    
                           A  1792    .VALUE 9
                           A  1793    
                           A  1794    .TYPE 13
                           A  1795    
                           A  1796    .ENDEF
                           A  1797    
                           A  1798    .DEFINE "data"
                           A  1799    
                           A  1800    .CLASS 65
                           A  1801    
                           A  1802    .VALUE 12
                           A  1803    
                           A  1804    .TYPE 47
                           A  1805    
                           A  1806    .ENDEF
                           A  1807    
                           A  1808    .DEFINE "n"
                           A  1809    
                           A  1810    .CLASS 65
                           A  1811    
                           A  1812    .VALUE -2
                           A  1813    
                           A  1814    .TYPE 13
                           A  1815    
                           A  1816    .ENDEF
                           A  1817    
04070C DDE5                A  1818    	PUSH	IX
04070E DD210000 00         A  1819    	LD	IX,0
040713 DD39                A  1820    	ADD	IX,SP
040715 3B                  A  1821    	DEC	SP
040716 3B                  A  1822    	DEC	SP
                           A  1823    ;  190		UINT16 n;
                           A  1824    ;  191		
                           A  1825    ;  192		putch(23); // vdu_sys
                           A  1826    .LINE 192
                           A  1827    
040717 01170000            A  1828    	LD	BC,23
04071B C5                  A  1829    	PUSH	BC
04071C CD 5F 29 04         A  1830    	CALL	_putch
040720 C1                  A  1831    	POP	BC
                           A  1832    ;  193		putch(27); // sprite command
                           A  1833    .LINE 193
                           A  1834    
040721 011B0000            A  1835    	LD	BC,27
040725 C5                  A  1836    	PUSH	BC
040726 CD 5F 29 04         A  1837    	CALL	_putch
04072A C1                  A  1838    	POP	BC
                           A  1839    ;  194		putch(1);  // send data to selected
                           A  1840    .LINE 194
                           A  1841    
04072B 01010000            A  1842    	LD	BC,1
04072F C5                  A  1843    	PUSH	BC
040730 CD 5F 29 04         A  1844    	CALL	_putch
040734 C1                  A  1845    	POP	BC
                           A  1846    ;  195		
                           A  1847    ;  196		write16bit(width);
                           A  1848    .LINE 196
                           A  1849    
040735 DD0706              A  1850    	LD	BC,(IX+%6)
040738 C5                  A  1851    	PUSH	BC
040739 CD EA 02 04         A  1852    	CALL	_write16bit
04073D C1                  A  1853    	POP	BC
                           A  1854    ;  197		write16bit(height);
                           A  1855    .LINE 197
                           A  1856    
04073E DD0709              A  1857    	LD	BC,(IX+%9)
040741 C5                  A  1858    	PUSH	BC
040742 CD EA 02 04         A  1859    	CALL	_write16bit
040746 C1                  A  1860    	POP	BC
                           A  1861    ;  198		
                           A  1862    ;  199		for(n = 0; n < (width*height); n++)
                           A  1863    .LINE 199
                           A  1864    
040747 DD36FE00            A  1865    	LD	(IX+%FFFFFFFE),%0
04074B DD36FF00            A  1866    	LD	(IX+%FFFFFFFF),%0
04074F 18 2B               A  1867    	JR	L_25
040751                     A  1868    L_23:
                           A  1869    ;  200		{
                           A  1870    ;  201			write32bit(data[n]);
                           A  1871    .LINE 201
                           A  1872    
040751 DD07FE              A  1873    	LD	BC,(IX+%FFFFFFFE)
040754 CD AD 2F 04         A  1874    	CALL	__stoiu
040758 29                  A  1875    	ADD	HL,HL
040759 29                  A  1876    	ADD	HL,HL
04075A DD070C              A  1877    	LD	BC,(IX+%C)
04075D 09                  A  1878    	ADD	HL,BC
04075E E5FDE1              A  1879    	LD	IY,HL
040761 FD0700              A  1880    	LD	BC,(IY)
040764 FD7E03              A  1881    	LD	A,(IY+%3)
040767 2600                A  1882    	LD	H,%0
040769 6F                  A  1883    	LD	L,A
04076A E5                  A  1884    	PUSH	HL
04076B C5                  A  1885    	PUSH	BC
04076C CD 1D 03 04         A  1886    	CALL	_write32bit
040770 C1                  A  1887    	POP	BC
040771 C1                  A  1888    	POP	BC
040772 DD27FE              A  1889    	LD	HL,(IX+%FFFFFFFE)
040775 23                  A  1890    	INC	HL
040776 DD75FE              A  1891    	LD	(IX+%FFFFFFFE),L
040779 DD74FF              A  1892    	LD	(IX+%FFFFFFFF),H
                           A  1893    ;  202			//delayms(1);
                           A  1894    ;  203		}
04077C                     A  1895    L_25:
                           A  1896    .LINE 203
                           A  1897    
04077C DD0706              A  1898    	LD	BC,(IX+%6)
04077F CD AD 2F 04         A  1899    	CALL	__stoiu
040783 E5D1                A  1900    	LD	DE,HL
040785 DD0709              A  1901    	LD	BC,(IX+%9)
040788 CD AD 2F 04         A  1902    	CALL	__stoiu
04078C E5C1                A  1903    	LD	BC,HL
04078E D5E1                A  1904    	LD	HL,DE
040790 CD 67 36 04         A  1905    	CALL	__imuls
040794 E5D1                A  1906    	LD	DE,HL
040796 DD07FE              A  1907    	LD	BC,(IX+%FFFFFFFE)
040799 CD AD 2F 04         A  1908    	CALL	__stoiu
04079D B7                  A  1909    	OR	A,A
04079E ED52                A  1910    	SBC	HL,DE
0407A0 CD F3 2D 04         A  1911    	CALL	__setflag
0407A4 FA 51 07 04         A  1912    	JP	M,L_23
                           A  1913    ;  204		return;		
                           A  1914    ;  205	}
                           A  1915    .LINE 205
                           A  1916    
0407A8 DDF9                A  1917    	LD	SP,IX
0407AA DDE1                A  1918    	POP	IX
0407AC C9                  A  1919    	RET	
                           A  1920    
                           A  1921    
                           A  1922    ;**************************** _vdp_bitmapSendDa
                           A  1923    ;Name                         Addr/Register   S
                           A  1924    ;_putch                              IMPORT  --
                           A  1925    ;n                                     IX-2    
                           A  1926    ;data                                 IX+12    
                           A  1927    ;height                                IX+9    
                           A  1928    ;width                                 IX+6    
                           A  1929    
                           A  1930    
                           A  1931    ; Stack Frame Size: 17 (bytes)
                           A  1932    ;       Spill Code: 0 (instruction)
                           A  1933    
                           A  1934    
                           A  1935    .ENDFUNC "vdp_bitmapSendDataSelected",205,"_vdp
                           A  1936    ;  206	
                           A  1937    ;  207	void vdp_bitmapSendData(UINT8 id, UINT1
                           A  1938    ;  208	{
0407AD                     A  1939    _vdp_bitmapSendData:
                           A  1940    .DEFINE "_vdp_bitmapSendData"
                           A  1941    
                           A  1942    .VALUE _vdp_bitmapSendData
                           A  1943    
                           A  1944    .CLASS 2
                           A  1945    
                           A  1946    .TYPE 65
                           A  1947    
                           A  1948    .ENDEF
                           A  1949    
                           A  1950    .BEGFUNC "vdp_bitmapSendData",208,"_vdp_bitmapS
                           A  1951    
                           A  1952    .LINE 208
                           A  1953    
                           A  1954    .DEFINE "id"
                           A  1955    
                           A  1956    .CLASS 65
                           A  1957    
                           A  1958    .VALUE 6
                           A  1959    
                           A  1960    .TYPE 12
                           A  1961    
                           A  1962    .ENDEF
                           A  1963    
                           A  1964    .DEFINE "width"
                           A  1965    
                           A  1966    .CLASS 65
                           A  1967    
                           A  1968    .VALUE 9
                           A  1969    
                           A  1970    .TYPE 13
                           A  1971    
                           A  1972    .ENDEF
                           A  1973    
                           A  1974    .DEFINE "height"
                           A  1975    
                           A  1976    .CLASS 65
                           A  1977    
                           A  1978    .VALUE 12
                           A  1979    
                           A  1980    .TYPE 13
                           A  1981    
                           A  1982    .ENDEF
                           A  1983    
                           A  1984    .DEFINE "data"
                           A  1985    
                           A  1986    .CLASS 65
                           A  1987    
                           A  1988    .VALUE 15
                           A  1989    
                           A  1990    .TYPE 47
                           A  1991    
                           A  1992    .ENDEF
                           A  1993    
0407AD DDE5                A  1994    	PUSH	IX
0407AF DD210000 00         A  1995    	LD	IX,0
0407B4 DD39                A  1996    	ADD	IX,SP
                           A  1997    ;  209		vdp_bitmapSelect(id);
                           A  1998    .LINE 209
                           A  1999    
0407B6 DD4E06              A  2000    	LD	C,(IX+%6)
0407B9 0600                A  2001    	LD	B,%0
0407BB C5                  A  2002    	PUSH	BC
0407BC CD D3 06 04         A  2003    	CALL	_vdp_bitmapSelect
0407C0 C1                  A  2004    	POP	BC
                           A  2005    ;  210		vdp_bitmapSendDataSelected(width, h
                           A  2006    .LINE 210
                           A  2007    
0407C1 DD070F              A  2008    	LD	BC,(IX+%F)
0407C4 C5                  A  2009    	PUSH	BC
0407C5 DD070C              A  2010    	LD	BC,(IX+%C)
0407C8 C5                  A  2011    	PUSH	BC
0407C9 DD0709              A  2012    	LD	BC,(IX+%9)
0407CC C5                  A  2013    	PUSH	BC
0407CD CD 0C 07 04         A  2014    	CALL	_vdp_bitmapSendDataSelected
0407D1 C1                  A  2015    	POP	BC
0407D2 C1                  A  2016    	POP	BC
0407D3 C1                  A  2017    	POP	BC
                           A  2018    ;  211		return;	
                           A  2019    ;  212	}
                           A  2020    .LINE 212
                           A  2021    
0407D4 DDF9                A  2022    	LD	SP,IX
0407D6 DDE1                A  2023    	POP	IX
0407D8 C9                  A  2024    	RET	
                           A  2025    
                           A  2026    
                           A  2027    ;**************************** _vdp_bitmapSendDa
                           A  2028    ;Name                         Addr/Register   S
                           A  2029    ;_vdp_bitmapSendDataSelected         IMPORT  --
                           A  2030    ;_vdp_bitmapSelect                   IMPORT  --
                           A  2031    ;data                                 IX+15    
                           A  2032    ;height                               IX+12    
                           A  2033    ;width                                 IX+9    
                           A  2034    ;id                                    IX+6    
                           A  2035    
                           A  2036    
                           A  2037    ; Stack Frame Size: 18 (bytes)
                           A  2038    ;       Spill Code: 0 (instruction)
                           A  2039    
                           A  2040    
                           A  2041    .ENDFUNC "vdp_bitmapSendData",212,"_vdp_bitmapS
                           A  2042    ;  213	
                           A  2043    ;  214	void vdp_bitmapDrawSelected(UINT16 x, U
                           A  2044    ;  215	{
0407D9                     A  2045    _vdp_bitmapDrawSelected:
                           A  2046    .DEFINE "_vdp_bitmapDrawSelected"
                           A  2047    
                           A  2048    .VALUE _vdp_bitmapDrawSelected
                           A  2049    
                           A  2050    .CLASS 2
                           A  2051    
                           A  2052    .TYPE 65
                           A  2053    
                           A  2054    .ENDEF
                           A  2055    
                           A  2056    .BEGFUNC "vdp_bitmapDrawSelected",215,"_vdp_bit
                           A  2057    
                           A  2058    .LINE 215
                           A  2059    
                           A  2060    .DEFINE "x"
                           A  2061    
                           A  2062    .CLASS 65
                           A  2063    
                           A  2064    .VALUE 6
                           A  2065    
                           A  2066    .TYPE 13
                           A  2067    
                           A  2068    .ENDEF
                           A  2069    
                           A  2070    .DEFINE "y"
                           A  2071    
                           A  2072    .CLASS 65
                           A  2073    
                           A  2074    .VALUE 9
                           A  2075    
                           A  2076    .TYPE 13
                           A  2077    
                           A  2078    .ENDEF
                           A  2079    
0407D9 DDE5                A  2080    	PUSH	IX
0407DB DD210000 00         A  2081    	LD	IX,0
0407E0 DD39                A  2082    	ADD	IX,SP
                           A  2083    ;  216		putch(23); // vdu_sys
                           A  2084    .LINE 216
                           A  2085    
0407E2 01170000            A  2086    	LD	BC,23
0407E6 C5                  A  2087    	PUSH	BC
0407E7 CD 5F 29 04         A  2088    	CALL	_putch
0407EB C1                  A  2089    	POP	BC
                           A  2090    ;  217		putch(27); // sprite command
                           A  2091    .LINE 217
                           A  2092    
0407EC 011B0000            A  2093    	LD	BC,27
0407F0 C5                  A  2094    	PUSH	BC
0407F1 CD 5F 29 04         A  2095    	CALL	_putch
0407F5 C1                  A  2096    	POP	BC
                           A  2097    ;  218		putch(3);  // draw selected bitmap
                           A  2098    .LINE 218
                           A  2099    
0407F6 01030000            A  2100    	LD	BC,3
0407FA C5                  A  2101    	PUSH	BC
0407FB CD 5F 29 04         A  2102    	CALL	_putch
0407FF C1                  A  2103    	POP	BC
                           A  2104    ;  219		
                           A  2105    ;  220		write16bit(x);
                           A  2106    .LINE 220
                           A  2107    
040800 DD0706              A  2108    	LD	BC,(IX+%6)
040803 C5                  A  2109    	PUSH	BC
040804 CD EA 02 04         A  2110    	CALL	_write16bit
040808 C1                  A  2111    	POP	BC
                           A  2112    ;  221		write16bit(y);
                           A  2113    .LINE 221
                           A  2114    
040809 DD0709              A  2115    	LD	BC,(IX+%9)
04080C C5                  A  2116    	PUSH	BC
04080D CD EA 02 04         A  2117    	CALL	_write16bit
040811 C1                  A  2118    	POP	BC
                           A  2119    ;  222		
                           A  2120    ;  223		return;
                           A  2121    ;  224	}
                           A  2122    .LINE 224
                           A  2123    
040812 DDF9                A  2124    	LD	SP,IX
040814 DDE1                A  2125    	POP	IX
040816 C9                  A  2126    	RET	
                           A  2127    
                           A  2128    
                           A  2129    ;**************************** _vdp_bitmapDrawSe
                           A  2130    ;Name                         Addr/Register   S
                           A  2131    ;_putch                              IMPORT  --
                           A  2132    ;y                                     IX+9    
                           A  2133    ;x                                     IX+6    
                           A  2134    
                           A  2135    
                           A  2136    ; Stack Frame Size: 12 (bytes)
                           A  2137    ;       Spill Code: 0 (instruction)
                           A  2138    
                           A  2139    
                           A  2140    .ENDFUNC "vdp_bitmapDrawSelected",224,"_vdp_bit
                           A  2141    ;  225	
                           A  2142    ;  226	void vdp_bitmapDraw(UINT8 id, UINT16 x,
                           A  2143    ;  227	{
040817                     A  2144    _vdp_bitmapDraw:
                           A  2145    .DEFINE "_vdp_bitmapDraw"
                           A  2146    
                           A  2147    .VALUE _vdp_bitmapDraw
                           A  2148    
                           A  2149    .CLASS 2
                           A  2150    
                           A  2151    .TYPE 65
                           A  2152    
                           A  2153    .ENDEF
                           A  2154    
                           A  2155    .BEGFUNC "vdp_bitmapDraw",227,"_vdp_bitmapDraw"
                           A  2156    
                           A  2157    .LINE 227
                           A  2158    
                           A  2159    .DEFINE "id"
                           A  2160    
                           A  2161    .CLASS 65
                           A  2162    
                           A  2163    .VALUE 6
                           A  2164    
                           A  2165    .TYPE 12
                           A  2166    
                           A  2167    .ENDEF
                           A  2168    
                           A  2169    .DEFINE "x"
                           A  2170    
                           A  2171    .CLASS 65
                           A  2172    
                           A  2173    .VALUE 9
                           A  2174    
                           A  2175    .TYPE 13
                           A  2176    
                           A  2177    .ENDEF
                           A  2178    
                           A  2179    .DEFINE "y"
                           A  2180    
                           A  2181    .CLASS 65
                           A  2182    
                           A  2183    .VALUE 12
                           A  2184    
                           A  2185    .TYPE 13
                           A  2186    
                           A  2187    .ENDEF
                           A  2188    
040817 DDE5                A  2189    	PUSH	IX
040819 DD210000 00         A  2190    	LD	IX,0
04081E DD39                A  2191    	ADD	IX,SP
                           A  2192    ;  228		vdp_bitmapSelect(id);
                           A  2193    .LINE 228
                           A  2194    
040820 DD4E06              A  2195    	LD	C,(IX+%6)
040823 0600                A  2196    	LD	B,%0
040825 C5                  A  2197    	PUSH	BC
040826 CD D3 06 04         A  2198    	CALL	_vdp_bitmapSelect
04082A C1                  A  2199    	POP	BC
                           A  2200    ;  229		vdp_bitmapDrawSelected(x,y);
                           A  2201    .LINE 229
                           A  2202    
04082B DD070C              A  2203    	LD	BC,(IX+%C)
04082E C5                  A  2204    	PUSH	BC
04082F DD0709              A  2205    	LD	BC,(IX+%9)
040832 C5                  A  2206    	PUSH	BC
040833 CD D9 07 04         A  2207    	CALL	_vdp_bitmapDrawSelected
040837 C1                  A  2208    	POP	BC
040838 C1                  A  2209    	POP	BC
                           A  2210    ;  230		return;	
                           A  2211    ;  231	}
                           A  2212    .LINE 231
                           A  2213    
040839 DDF9                A  2214    	LD	SP,IX
04083B DDE1                A  2215    	POP	IX
04083D C9                  A  2216    	RET	
                           A  2217    
                           A  2218    
                           A  2219    ;**************************** _vdp_bitmapDraw *
                           A  2220    ;Name                         Addr/Register   S
                           A  2221    ;_vdp_bitmapDrawSelected             IMPORT  --
                           A  2222    ;_vdp_bitmapSelect                   IMPORT  --
                           A  2223    ;y                                    IX+12    
                           A  2224    ;x                                     IX+9    
                           A  2225    ;id                                    IX+6    
                           A  2226    
                           A  2227    
                           A  2228    ; Stack Frame Size: 15 (bytes)
                           A  2229    ;       Spill Code: 0 (instruction)
                           A  2230    
                           A  2231    
                           A  2232    .ENDFUNC "vdp_bitmapDraw",231,"_vdp_bitmapDraw"
                           A  2233    ;  232	
                           A  2234    ;  233	void vdp_bitmapCreateSolidColorSelected
                           A  2235    ;  234	{
04083E                     A  2236    _vdp_bitmapCreateSolidColorSelected:
                           A  2237    .DEFINE "_vdp_bitmapCreateSolidColorSelected"
                           A  2238    
                           A  2239    .VALUE _vdp_bitmapCreateSolidColorSelected
                           A  2240    
                           A  2241    .CLASS 2
                           A  2242    
                           A  2243    .TYPE 65
                           A  2244    
                           A  2245    .ENDEF
                           A  2246    
                           A  2247    .BEGFUNC "vdp_bitmapCreateSolidColorSelected",2
                           A  2248    
                           A  2249    .LINE 234
                           A  2250    
                           A  2251    .DEFINE "width"
                           A  2252    
                           A  2253    .CLASS 65
                           A  2254    
                           A  2255    .VALUE 6
                           A  2256    
                           A  2257    .TYPE 13
                           A  2258    
                           A  2259    .ENDEF
                           A  2260    
                           A  2261    .DEFINE "height"
                           A  2262    
                           A  2263    .CLASS 65
                           A  2264    
                           A  2265    .VALUE 9
                           A  2266    
                           A  2267    .TYPE 13
                           A  2268    
                           A  2269    .ENDEF
                           A  2270    
                           A  2271    .DEFINE "abgr"
                           A  2272    
                           A  2273    .CLASS 65
                           A  2274    
                           A  2275    .VALUE 12
                           A  2276    
                           A  2277    .TYPE 15
                           A  2278    
                           A  2279    .ENDEF
                           A  2280    
04083E DDE5                A  2281    	PUSH	IX
040840 DD210000 00         A  2282    	LD	IX,0
040845 DD39                A  2283    	ADD	IX,SP
                           A  2284    ;  235		putch(23); // vdu_sys
                           A  2285    .LINE 235
                           A  2286    
040847 01170000            A  2287    	LD	BC,23
04084B C5                  A  2288    	PUSH	BC
04084C CD 5F 29 04         A  2289    	CALL	_putch
040850 C1                  A  2290    	POP	BC
                           A  2291    ;  236		putch(27); // sprite command
                           A  2292    .LINE 236
                           A  2293    
040851 011B0000            A  2294    	LD	BC,27
040855 C5                  A  2295    	PUSH	BC
040856 CD 5F 29 04         A  2296    	CALL	_putch
04085A C1                  A  2297    	POP	BC
                           A  2298    ;  237		putch(2);  // define in single colo
                           A  2299    .LINE 237
                           A  2300    
04085B 01020000            A  2301    	LD	BC,2
04085F C5                  A  2302    	PUSH	BC
040860 CD 5F 29 04         A  2303    	CALL	_putch
040864 C1                  A  2304    	POP	BC
                           A  2305    ;  238		
                           A  2306    ;  239		write16bit(width);
                           A  2307    .LINE 239
                           A  2308    
040865 DD0706              A  2309    	LD	BC,(IX+%6)
040868 C5                  A  2310    	PUSH	BC
040869 CD EA 02 04         A  2311    	CALL	_write16bit
04086D C1                  A  2312    	POP	BC
                           A  2313    ;  240		write16bit(height);
                           A  2314    .LINE 240
                           A  2315    
04086E DD0709              A  2316    	LD	BC,(IX+%9)
040871 C5                  A  2317    	PUSH	BC
040872 CD EA 02 04         A  2318    	CALL	_write16bit
040876 C1                  A  2319    	POP	BC
                           A  2320    ;  241		write32bit(abgr);
                           A  2321    .LINE 241
                           A  2322    
040877 DD4E0F              A  2323    	LD	C,(IX+%F)
04087A 0600                A  2324    	LD	B,%0
04087C C5                  A  2325    	PUSH	BC
04087D DD070C              A  2326    	LD	BC,(IX+%C)
040880 C5                  A  2327    	PUSH	BC
040881 CD 1D 03 04         A  2328    	CALL	_write32bit
040885 C1                  A  2329    	POP	BC
040886 C1                  A  2330    	POP	BC
                           A  2331    ;  242		return;		
                           A  2332    ;  243	}
                           A  2333    .LINE 243
                           A  2334    
040887 DDF9                A  2335    	LD	SP,IX
040889 DDE1                A  2336    	POP	IX
04088B C9                  A  2337    	RET	
                           A  2338    
                           A  2339    
                           A  2340    ;**************************** _vdp_bitmapCreate
                           A  2341    ;Name                         Addr/Register   S
                           A  2342    ;_putch                              IMPORT  --
                           A  2343    ;abgr                                 IX+12    
                           A  2344    ;height                                IX+9    
                           A  2345    ;width                                 IX+6    
                           A  2346    
                           A  2347    
                           A  2348    ; Stack Frame Size: 18 (bytes)
                           A  2349    ;       Spill Code: 0 (instruction)
                           A  2350    
                           A  2351    
                           A  2352    .ENDFUNC "vdp_bitmapCreateSolidColorSelected",2
                           A  2353    ;  244	
                           A  2354    ;  245	void vdp_bitmapCreateSolidColor(UINT8 i
                           A  2355    ;  246	{
04088C                     A  2356    _vdp_bitmapCreateSolidColor:
                           A  2357    .DEFINE "_vdp_bitmapCreateSolidColor"
                           A  2358    
                           A  2359    .VALUE _vdp_bitmapCreateSolidColor
                           A  2360    
                           A  2361    .CLASS 2
                           A  2362    
                           A  2363    .TYPE 65
                           A  2364    
                           A  2365    .ENDEF
                           A  2366    
                           A  2367    .BEGFUNC "vdp_bitmapCreateSolidColor",246,"_vdp
                           A  2368    
                           A  2369    .LINE 246
                           A  2370    
                           A  2371    .DEFINE "id"
                           A  2372    
                           A  2373    .CLASS 65
                           A  2374    
                           A  2375    .VALUE 6
                           A  2376    
                           A  2377    .TYPE 12
                           A  2378    
                           A  2379    .ENDEF
                           A  2380    
                           A  2381    .DEFINE "width"
                           A  2382    
                           A  2383    .CLASS 65
                           A  2384    
                           A  2385    .VALUE 9
                           A  2386    
                           A  2387    .TYPE 13
                           A  2388    
                           A  2389    .ENDEF
                           A  2390    
                           A  2391    .DEFINE "height"
                           A  2392    
                           A  2393    .CLASS 65
                           A  2394    
                           A  2395    .VALUE 12
                           A  2396    
                           A  2397    .TYPE 13
                           A  2398    
                           A  2399    .ENDEF
                           A  2400    
                           A  2401    .DEFINE "abgr"
                           A  2402    
                           A  2403    .CLASS 65
                           A  2404    
                           A  2405    .VALUE 15
                           A  2406    
                           A  2407    .TYPE 15
                           A  2408    
                           A  2409    .ENDEF
                           A  2410    
04088C DDE5                A  2411    	PUSH	IX
04088E DD210000 00         A  2412    	LD	IX,0
040893 DD39                A  2413    	ADD	IX,SP
                           A  2414    ;  247		vdp_bitmapSelect(id);
                           A  2415    .LINE 247
                           A  2416    
040895 DD4E06              A  2417    	LD	C,(IX+%6)
040898 0600                A  2418    	LD	B,%0
04089A C5                  A  2419    	PUSH	BC
04089B CD D3 06 04         A  2420    	CALL	_vdp_bitmapSelect
04089F C1                  A  2421    	POP	BC
                           A  2422    ;  248		vdp_bitmapCreateSolidColorSelected(
                           A  2423    .LINE 248
                           A  2424    
0408A0 DD4E12              A  2425    	LD	C,(IX+%12)
0408A3 0600                A  2426    	LD	B,%0
0408A5 C5                  A  2427    	PUSH	BC
0408A6 DD070F              A  2428    	LD	BC,(IX+%F)
0408A9 C5                  A  2429    	PUSH	BC
0408AA DD070C              A  2430    	LD	BC,(IX+%C)
0408AD C5                  A  2431    	PUSH	BC
0408AE DD0709              A  2432    	LD	BC,(IX+%9)
0408B1 C5                  A  2433    	PUSH	BC
0408B2 CD 3E 08 04         A  2434    	CALL	_vdp_bitmapCreateSolidColorSelected
0408B6 C1                  A  2435    	POP	BC
0408B7 C1                  A  2436    	POP	BC
0408B8 C1                  A  2437    	POP	BC
0408B9 C1                  A  2438    	POP	BC
                           A  2439    ;  249		return;	
                           A  2440    ;  250	}
                           A  2441    .LINE 250
                           A  2442    
0408BA DDF9                A  2443    	LD	SP,IX
0408BC DDE1                A  2444    	POP	IX
0408BE C9                  A  2445    	RET	
                           A  2446    
                           A  2447    
                           A  2448    ;**************************** _vdp_bitmapCreate
                           A  2449    ;Name                         Addr/Register   S
                           A  2450    ;_vdp_bitmapCreateSolidColorSelected      IMPOR
                           A  2451    ;_vdp_bitmapSelect                   IMPORT  --
                           A  2452    ;abgr                                 IX+15    
                           A  2453    ;height                               IX+12    
                           A  2454    ;width                                 IX+9    
                           A  2455    ;id                                    IX+6    
                           A  2456    
                           A  2457    
                           A  2458    ; Stack Frame Size: 21 (bytes)
                           A  2459    ;       Spill Code: 0 (instruction)
                           A  2460    
                           A  2461    
                           A  2462    .ENDFUNC "vdp_bitmapCreateSolidColor",250,"_vdp
                           A  2463    ;  251	
                           A  2464    ;  252	// Sprite VDP functions
                           A  2465    ;  253	void vdp_spriteSelect(UINT8 id)
                           A  2466    ;  254	{
0408BF                     A  2467    _vdp_spriteSelect:
                           A  2468    .DEFINE "_vdp_spriteSelect"
                           A  2469    
                           A  2470    .VALUE _vdp_spriteSelect
                           A  2471    
                           A  2472    .CLASS 2
                           A  2473    
                           A  2474    .TYPE 65
                           A  2475    
                           A  2476    .ENDEF
                           A  2477    
                           A  2478    .BEGFUNC "vdp_spriteSelect",254,"_vdp_spriteSel
                           A  2479    
                           A  2480    .LINE 254
                           A  2481    
                           A  2482    .DEFINE "id"
                           A  2483    
                           A  2484    .CLASS 65
                           A  2485    
                           A  2486    .VALUE 6
                           A  2487    
                           A  2488    .TYPE 12
                           A  2489    
                           A  2490    .ENDEF
                           A  2491    
0408BF DDE5                A  2492    	PUSH	IX
0408C1 DD210000 00         A  2493    	LD	IX,0
0408C6 DD39                A  2494    	ADD	IX,SP
                           A  2495    ;  255		putch(23); // vdu_sys
                           A  2496    .LINE 255
                           A  2497    
0408C8 01170000            A  2498    	LD	BC,23
0408CC C5                  A  2499    	PUSH	BC
0408CD CD 5F 29 04         A  2500    	CALL	_putch
0408D1 C1                  A  2501    	POP	BC
                           A  2502    ;  256		putch(27); // sprite command
                           A  2503    .LINE 256
                           A  2504    
0408D2 011B0000            A  2505    	LD	BC,27
0408D6 C5                  A  2506    	PUSH	BC
0408D7 CD 5F 29 04         A  2507    	CALL	_putch
0408DB C1                  A  2508    	POP	BC
                           A  2509    ;  257		putch(4);  // select sprite
                           A  2510    .LINE 257
                           A  2511    
0408DC 01040000            A  2512    	LD	BC,4
0408E0 C5                  A  2513    	PUSH	BC
0408E1 CD 5F 29 04         A  2514    	CALL	_putch
0408E5 C1                  A  2515    	POP	BC
                           A  2516    ;  258		putch(id);
                           A  2517    .LINE 258
                           A  2518    
0408E6 DD7E06              A  2519    	LD	A,(IX+%6)
0408E9 B7ED62              A  2520    	UEXT	HL
0408EC 6F                  A  2521    	LD	L,A
0408ED E5                  A  2522    	PUSH	HL
0408EE CD 5F 29 04         A  2523    	CALL	_putch
0408F2 C1                  A  2524    	POP	BC
                           A  2525    ;  259		return;			
                           A  2526    ;  260	}
                           A  2527    .LINE 260
                           A  2528    
0408F3 DDF9                A  2529    	LD	SP,IX
0408F5 DDE1                A  2530    	POP	IX
0408F7 C9                  A  2531    	RET	
                           A  2532    
                           A  2533    
                           A  2534    ;**************************** _vdp_spriteSelect
                           A  2535    ;Name                         Addr/Register   S
                           A  2536    ;_putch                              IMPORT  --
                           A  2537    ;id                                    IX+6    
                           A  2538    
                           A  2539    
                           A  2540    ; Stack Frame Size: 9 (bytes)
                           A  2541    ;       Spill Code: 0 (instruction)
                           A  2542    
                           A  2543    
                           A  2544    .ENDFUNC "vdp_spriteSelect",260,"_vdp_spriteSel
                           A  2545    ;  261	
                           A  2546    ;  262	void vdp_spriteClearFramesSelected(void
                           A  2547    ;  263	{
0408F8                     A  2548    _vdp_spriteClearFramesSelected:
                           A  2549    .DEFINE "_vdp_spriteClearFramesSelected"
                           A  2550    
                           A  2551    .VALUE _vdp_spriteClearFramesSelected
                           A  2552    
                           A  2553    .CLASS 2
                           A  2554    
                           A  2555    .TYPE 65
                           A  2556    
                           A  2557    .ENDEF
                           A  2558    
                           A  2559    .BEGFUNC "vdp_spriteClearFramesSelected",263,"_
                           A  2560    
0408F8 DDE5                A  2561    	PUSH	IX
0408FA DD210000 00         A  2562    	LD	IX,0
0408FF DD39                A  2563    	ADD	IX,SP
                           A  2564    ;  264		putch(23); // vdu_sys
                           A  2565    .LINE 264
                           A  2566    
040901 01170000            A  2567    	LD	BC,23
040905 C5                  A  2568    	PUSH	BC
040906 CD 5F 29 04         A  2569    	CALL	_putch
04090A C1                  A  2570    	POP	BC
                           A  2571    ;  265		putch(27); // sprite command
                           A  2572    .LINE 265
                           A  2573    
04090B 011B0000            A  2574    	LD	BC,27
04090F C5                  A  2575    	PUSH	BC
040910 CD 5F 29 04         A  2576    	CALL	_putch
040914 C1                  A  2577    	POP	BC
                           A  2578    ;  266		putch(5);  // clear frames
                           A  2579    .LINE 266
                           A  2580    
040915 01050000            A  2581    	LD	BC,5
040919 C5                  A  2582    	PUSH	BC
04091A CD 5F 29 04         A  2583    	CALL	_putch
04091E C1                  A  2584    	POP	BC
                           A  2585    ;  267		return;				
                           A  2586    ;  268	}
                           A  2587    .LINE 268
                           A  2588    
04091F DDF9                A  2589    	LD	SP,IX
040921 DDE1                A  2590    	POP	IX
040923 C9                  A  2591    	RET	
                           A  2592    
                           A  2593    
                           A  2594    ;**************************** _vdp_spriteClearF
                           A  2595    ;Name                         Addr/Register   S
                           A  2596    ;_putch                              IMPORT  --
                           A  2597    
                           A  2598    
                           A  2599    ; Stack Frame Size: 6 (bytes)
                           A  2600    ;       Spill Code: 0 (instruction)
                           A  2601    
                           A  2602    
                           A  2603    .ENDFUNC "vdp_spriteClearFramesSelected",268,"_
                           A  2604    ;  269	
                           A  2605    ;  270	void vdp_spriteClearFrames(UINT8 bitmap
                           A  2606    ;  271	{
040924                     A  2607    _vdp_spriteClearFrames:
                           A  2608    .DEFINE "_vdp_spriteClearFrames"
                           A  2609    
                           A  2610    .VALUE _vdp_spriteClearFrames
                           A  2611    
                           A  2612    .CLASS 2
                           A  2613    
                           A  2614    .TYPE 65
                           A  2615    
                           A  2616    .ENDEF
                           A  2617    
                           A  2618    .BEGFUNC "vdp_spriteClearFrames",271,"_vdp_spri
                           A  2619    
                           A  2620    .LINE 271
                           A  2621    
                           A  2622    .DEFINE "bitmapid"
                           A  2623    
                           A  2624    .CLASS 65
                           A  2625    
                           A  2626    .VALUE 6
                           A  2627    
                           A  2628    .TYPE 12
                           A  2629    
                           A  2630    .ENDEF
                           A  2631    
040924 DDE5                A  2632    	PUSH	IX
040926 DD210000 00         A  2633    	LD	IX,0
04092B DD39                A  2634    	ADD	IX,SP
                           A  2635    ;  272		vdp_spriteSelect(bitmapid);
                           A  2636    .LINE 272
                           A  2637    
04092D DD4E06              A  2638    	LD	C,(IX+%6)
040930 0600                A  2639    	LD	B,%0
040932 C5                  A  2640    	PUSH	BC
040933 CD BF 08 04         A  2641    	CALL	_vdp_spriteSelect
040937 C1                  A  2642    	POP	BC
                           A  2643    ;  273		vdp_spriteClearFramesSelected();
                           A  2644    .LINE 273
                           A  2645    
040938 CD F8 08 04         A  2646    	CALL	_vdp_spriteClearFramesSelected
                           A  2647    ;  274		return;				
                           A  2648    ;  275	}
                           A  2649    .LINE 275
                           A  2650    
04093C DDF9                A  2651    	LD	SP,IX
04093E DDE1                A  2652    	POP	IX
040940 C9                  A  2653    	RET	
                           A  2654    
                           A  2655    
                           A  2656    ;**************************** _vdp_spriteClearF
                           A  2657    ;Name                         Addr/Register   S
                           A  2658    ;_vdp_spriteClearFramesSelected      IMPORT  --
                           A  2659    ;_vdp_spriteSelect                   IMPORT  --
                           A  2660    ;bitmapid                              IX+6    
                           A  2661    
                           A  2662    
                           A  2663    ; Stack Frame Size: 9 (bytes)
                           A  2664    ;       Spill Code: 0 (instruction)
                           A  2665    
                           A  2666    
                           A  2667    .ENDFUNC "vdp_spriteClearFrames",275,"_vdp_spri
                           A  2668    ;  276	
                           A  2669    ;  277	void vdp_spriteAddFrameSelected(UINT8 b
                           A  2670    ;  278	{
040941                     A  2671    _vdp_spriteAddFrameSelected:
                           A  2672    .DEFINE "_vdp_spriteAddFrameSelected"
                           A  2673    
                           A  2674    .VALUE _vdp_spriteAddFrameSelected
                           A  2675    
                           A  2676    .CLASS 2
                           A  2677    
                           A  2678    .TYPE 65
                           A  2679    
                           A  2680    .ENDEF
                           A  2681    
                           A  2682    .BEGFUNC "vdp_spriteAddFrameSelected",278,"_vdp
                           A  2683    
                           A  2684    .LINE 278
                           A  2685    
                           A  2686    .DEFINE "bitmapid"
                           A  2687    
                           A  2688    .CLASS 65
                           A  2689    
                           A  2690    .VALUE 6
                           A  2691    
                           A  2692    .TYPE 12
                           A  2693    
                           A  2694    .ENDEF
                           A  2695    
040941 DDE5                A  2696    	PUSH	IX
040943 DD210000 00         A  2697    	LD	IX,0
040948 DD39                A  2698    	ADD	IX,SP
                           A  2699    ;  279		putch(23); // vdu_sys
                           A  2700    .LINE 279
                           A  2701    
04094A 01170000            A  2702    	LD	BC,23
04094E C5                  A  2703    	PUSH	BC
04094F CD 5F 29 04         A  2704    	CALL	_putch
040953 C1                  A  2705    	POP	BC
                           A  2706    ;  280		putch(27); // sprite command
                           A  2707    .LINE 280
                           A  2708    
040954 011B0000            A  2709    	LD	BC,27
040958 C5                  A  2710    	PUSH	BC
040959 CD 5F 29 04         A  2711    	CALL	_putch
04095D C1                  A  2712    	POP	BC
                           A  2713    ;  281		putch(6);  // add frame
                           A  2714    .LINE 281
                           A  2715    
04095E 01060000            A  2716    	LD	BC,6
040962 C5                  A  2717    	PUSH	BC
040963 CD 5F 29 04         A  2718    	CALL	_putch
040967 C1                  A  2719    	POP	BC
                           A  2720    ;  282		putch(bitmapid);
                           A  2721    .LINE 282
                           A  2722    
040968 DD7E06              A  2723    	LD	A,(IX+%6)
04096B B7ED62              A  2724    	UEXT	HL
04096E 6F                  A  2725    	LD	L,A
04096F E5                  A  2726    	PUSH	HL
040970 CD 5F 29 04         A  2727    	CALL	_putch
040974 C1                  A  2728    	POP	BC
                           A  2729    ;  283		return;	
                           A  2730    ;  284	}
                           A  2731    .LINE 284
                           A  2732    
040975 DDF9                A  2733    	LD	SP,IX
040977 DDE1                A  2734    	POP	IX
040979 C9                  A  2735    	RET	
                           A  2736    
                           A  2737    
                           A  2738    ;**************************** _vdp_spriteAddFra
                           A  2739    ;Name                         Addr/Register   S
                           A  2740    ;_putch                              IMPORT  --
                           A  2741    ;bitmapid                              IX+6    
                           A  2742    
                           A  2743    
                           A  2744    ; Stack Frame Size: 9 (bytes)
                           A  2745    ;       Spill Code: 0 (instruction)
                           A  2746    
                           A  2747    
                           A  2748    .ENDFUNC "vdp_spriteAddFrameSelected",284,"_vdp
                           A  2749    ;  285	
                           A  2750    ;  286	void vdp_spriteAddFrame(UINT8 id, UINT8
                           A  2751    ;  287	{
04097A                     A  2752    _vdp_spriteAddFrame:
                           A  2753    .DEFINE "_vdp_spriteAddFrame"
                           A  2754    
                           A  2755    .VALUE _vdp_spriteAddFrame
                           A  2756    
                           A  2757    .CLASS 2
                           A  2758    
                           A  2759    .TYPE 65
                           A  2760    
                           A  2761    .ENDEF
                           A  2762    
                           A  2763    .BEGFUNC "vdp_spriteAddFrame",287,"_vdp_spriteA
                           A  2764    
                           A  2765    .LINE 287
                           A  2766    
                           A  2767    .DEFINE "id"
                           A  2768    
                           A  2769    .CLASS 65
                           A  2770    
                           A  2771    .VALUE 6
                           A  2772    
                           A  2773    .TYPE 12
                           A  2774    
                           A  2775    .ENDEF
                           A  2776    
                           A  2777    .DEFINE "bitmapid"
                           A  2778    
                           A  2779    .CLASS 65
                           A  2780    
                           A  2781    .VALUE 9
                           A  2782    
                           A  2783    .TYPE 12
                           A  2784    
                           A  2785    .ENDEF
                           A  2786    
04097A DDE5                A  2787    	PUSH	IX
04097C DD210000 00         A  2788    	LD	IX,0
040981 DD39                A  2789    	ADD	IX,SP
                           A  2790    ;  288		vdp_spriteSelect(id);
                           A  2791    .LINE 288
                           A  2792    
040983 DD4E06              A  2793    	LD	C,(IX+%6)
040986 0600                A  2794    	LD	B,%0
040988 C5                  A  2795    	PUSH	BC
040989 CD BF 08 04         A  2796    	CALL	_vdp_spriteSelect
04098D C1                  A  2797    	POP	BC
                           A  2798    ;  289		vdp_spriteAddFrameSelected(bitmapid
                           A  2799    .LINE 289
                           A  2800    
04098E DD4E09              A  2801    	LD	C,(IX+%9)
040991 0600                A  2802    	LD	B,%0
040993 C5                  A  2803    	PUSH	BC
040994 CD 41 09 04         A  2804    	CALL	_vdp_spriteAddFrameSelected
040998 C1                  A  2805    	POP	BC
                           A  2806    ;  290		return;	
                           A  2807    ;  291	}
                           A  2808    .LINE 291
                           A  2809    
040999 DDF9                A  2810    	LD	SP,IX
04099B DDE1                A  2811    	POP	IX
04099D C9                  A  2812    	RET	
                           A  2813    
                           A  2814    
                           A  2815    ;**************************** _vdp_spriteAddFra
                           A  2816    ;Name                         Addr/Register   S
                           A  2817    ;_vdp_spriteAddFrameSelected         IMPORT  --
                           A  2818    ;_vdp_spriteSelect                   IMPORT  --
                           A  2819    ;bitmapid                              IX+9    
                           A  2820    ;id                                    IX+6    
                           A  2821    
                           A  2822    
                           A  2823    ; Stack Frame Size: 12 (bytes)
                           A  2824    ;       Spill Code: 0 (instruction)
                           A  2825    
                           A  2826    
                           A  2827    .ENDFUNC "vdp_spriteAddFrame",291,"_vdp_spriteA
                           A  2828    ;  292	
                           A  2829    ;  293	void vdp_spriteNextFrameSelected(void)
                           A  2830    ;  294	{
04099E                     A  2831    _vdp_spriteNextFrameSelected:
                           A  2832    .DEFINE "_vdp_spriteNextFrameSelected"
                           A  2833    
                           A  2834    .VALUE _vdp_spriteNextFrameSelected
                           A  2835    
                           A  2836    .CLASS 2
                           A  2837    
                           A  2838    .TYPE 65
                           A  2839    
                           A  2840    .ENDEF
                           A  2841    
                           A  2842    .BEGFUNC "vdp_spriteNextFrameSelected",294,"_vd
                           A  2843    
04099E DDE5                A  2844    	PUSH	IX
0409A0 DD210000 00         A  2845    	LD	IX,0
0409A5 DD39                A  2846    	ADD	IX,SP
                           A  2847    ;  295		putch(23); // vdu_sys
                           A  2848    .LINE 295
                           A  2849    
0409A7 01170000            A  2850    	LD	BC,23
0409AB C5                  A  2851    	PUSH	BC
0409AC CD 5F 29 04         A  2852    	CALL	_putch
0409B0 C1                  A  2853    	POP	BC
                           A  2854    ;  296		putch(27); // sprite command
                           A  2855    .LINE 296
                           A  2856    
0409B1 011B0000            A  2857    	LD	BC,27
0409B5 C5                  A  2858    	PUSH	BC
0409B6 CD 5F 29 04         A  2859    	CALL	_putch
0409BA C1                  A  2860    	POP	BC
                           A  2861    ;  297		putch(8);  // next frame
                           A  2862    .LINE 297
                           A  2863    
0409BB 01080000            A  2864    	LD	BC,8
0409BF C5                  A  2865    	PUSH	BC
0409C0 CD 5F 29 04         A  2866    	CALL	_putch
0409C4 C1                  A  2867    	POP	BC
                           A  2868    ;  298		return;			
                           A  2869    ;  299	}
                           A  2870    .LINE 299
                           A  2871    
0409C5 DDF9                A  2872    	LD	SP,IX
0409C7 DDE1                A  2873    	POP	IX
0409C9 C9                  A  2874    	RET	
                           A  2875    
                           A  2876    
                           A  2877    ;**************************** _vdp_spriteNextFr
                           A  2878    ;Name                         Addr/Register   S
                           A  2879    ;_putch                              IMPORT  --
                           A  2880    
                           A  2881    
                           A  2882    ; Stack Frame Size: 6 (bytes)
                           A  2883    ;       Spill Code: 0 (instruction)
                           A  2884    
                           A  2885    
                           A  2886    .ENDFUNC "vdp_spriteNextFrameSelected",299,"_vd
                           A  2887    ;  300	
                           A  2888    ;  301	void vdp_spriteNextFrame(UINT8 id)
                           A  2889    ;  302	{
0409CA                     A  2890    _vdp_spriteNextFrame:
                           A  2891    .DEFINE "_vdp_spriteNextFrame"
                           A  2892    
                           A  2893    .VALUE _vdp_spriteNextFrame
                           A  2894    
                           A  2895    .CLASS 2
                           A  2896    
                           A  2897    .TYPE 65
                           A  2898    
                           A  2899    .ENDEF
                           A  2900    
                           A  2901    .BEGFUNC "vdp_spriteNextFrame",302,"_vdp_sprite
                           A  2902    
                           A  2903    .LINE 302
                           A  2904    
                           A  2905    .DEFINE "id"
                           A  2906    
                           A  2907    .CLASS 65
                           A  2908    
                           A  2909    .VALUE 6
                           A  2910    
                           A  2911    .TYPE 12
                           A  2912    
                           A  2913    .ENDEF
                           A  2914    
0409CA DDE5                A  2915    	PUSH	IX
0409CC DD210000 00         A  2916    	LD	IX,0
0409D1 DD39                A  2917    	ADD	IX,SP
                           A  2918    ;  303		vdp_spriteSelect(id);
                           A  2919    .LINE 303
                           A  2920    
0409D3 DD4E06              A  2921    	LD	C,(IX+%6)
0409D6 0600                A  2922    	LD	B,%0
0409D8 C5                  A  2923    	PUSH	BC
0409D9 CD BF 08 04         A  2924    	CALL	_vdp_spriteSelect
0409DD C1                  A  2925    	POP	BC
                           A  2926    ;  304		vdp_spriteNextFrameSelected();
                           A  2927    .LINE 304
                           A  2928    
0409DE CD 9E 09 04         A  2929    	CALL	_vdp_spriteNextFrameSelected
                           A  2930    ;  305		return;
                           A  2931    ;  306	}
                           A  2932    .LINE 306
                           A  2933    
0409E2 DDF9                A  2934    	LD	SP,IX
0409E4 DDE1                A  2935    	POP	IX
0409E6 C9                  A  2936    	RET	
                           A  2937    
                           A  2938    
                           A  2939    ;**************************** _vdp_spriteNextFr
                           A  2940    ;Name                         Addr/Register   S
                           A  2941    ;_vdp_spriteNextFrameSelected        IMPORT  --
                           A  2942    ;_vdp_spriteSelect                   IMPORT  --
                           A  2943    ;id                                    IX+6    
                           A  2944    
                           A  2945    
                           A  2946    ; Stack Frame Size: 9 (bytes)
                           A  2947    ;       Spill Code: 0 (instruction)
                           A  2948    
                           A  2949    
                           A  2950    .ENDFUNC "vdp_spriteNextFrame",306,"_vdp_sprite
                           A  2951    ;  307	
                           A  2952    ;  308	void vdp_spritePreviousFrameSelected(vo
                           A  2953    ;  309	{
0409E7                     A  2954    _vdp_spritePreviousFrameSelected:
                           A  2955    .DEFINE "_vdp_spritePreviousFrameSelected"
                           A  2956    
                           A  2957    .VALUE _vdp_spritePreviousFrameSelected
                           A  2958    
                           A  2959    .CLASS 2
                           A  2960    
                           A  2961    .TYPE 65
                           A  2962    
                           A  2963    .ENDEF
                           A  2964    
                           A  2965    .BEGFUNC "vdp_spritePreviousFrameSelected",309,
                           A  2966    
0409E7 DDE5                A  2967    	PUSH	IX
0409E9 DD210000 00         A  2968    	LD	IX,0
0409EE DD39                A  2969    	ADD	IX,SP
                           A  2970    ;  310		putch(23); // vdu_sys
                           A  2971    .LINE 310
                           A  2972    
0409F0 01170000            A  2973    	LD	BC,23
0409F4 C5                  A  2974    	PUSH	BC
0409F5 CD 5F 29 04         A  2975    	CALL	_putch
0409F9 C1                  A  2976    	POP	BC
                           A  2977    ;  311		putch(27); // sprite command
                           A  2978    .LINE 311
                           A  2979    
0409FA 011B0000            A  2980    	LD	BC,27
0409FE C5                  A  2981    	PUSH	BC
0409FF CD 5F 29 04         A  2982    	CALL	_putch
040A03 C1                  A  2983    	POP	BC
                           A  2984    ;  312		putch(9); // previous frame
                           A  2985    .LINE 312
                           A  2986    
040A04 01090000            A  2987    	LD	BC,9
040A08 C5                  A  2988    	PUSH	BC
040A09 CD 5F 29 04         A  2989    	CALL	_putch
040A0D C1                  A  2990    	POP	BC
                           A  2991    ;  313		return;	
                           A  2992    ;  314	}
                           A  2993    .LINE 314
                           A  2994    
040A0E DDF9                A  2995    	LD	SP,IX
040A10 DDE1                A  2996    	POP	IX
040A12 C9                  A  2997    	RET	
                           A  2998    
                           A  2999    
                           A  3000    ;**************************** _vdp_spritePrevio
                           A  3001    ;Name                         Addr/Register   S
                           A  3002    ;_putch                              IMPORT  --
                           A  3003    
                           A  3004    
                           A  3005    ; Stack Frame Size: 6 (bytes)
                           A  3006    ;       Spill Code: 0 (instruction)
                           A  3007    
                           A  3008    
                           A  3009    .ENDFUNC "vdp_spritePreviousFrameSelected",314,
                           A  3010    ;  315	
                           A  3011    ;  316	void vdp_spritePreviousFrame(UINT8 id)
                           A  3012    ;  317	{
040A13                     A  3013    _vdp_spritePreviousFrame:
                           A  3014    .DEFINE "_vdp_spritePreviousFrame"
                           A  3015    
                           A  3016    .VALUE _vdp_spritePreviousFrame
                           A  3017    
                           A  3018    .CLASS 2
                           A  3019    
                           A  3020    .TYPE 65
                           A  3021    
                           A  3022    .ENDEF
                           A  3023    
                           A  3024    .BEGFUNC "vdp_spritePreviousFrame",317,"_vdp_sp
                           A  3025    
                           A  3026    .LINE 317
                           A  3027    
                           A  3028    .DEFINE "id"
                           A  3029    
                           A  3030    .CLASS 65
                           A  3031    
                           A  3032    .VALUE 6
                           A  3033    
                           A  3034    .TYPE 12
                           A  3035    
                           A  3036    .ENDEF
                           A  3037    
040A13 DDE5                A  3038    	PUSH	IX
040A15 DD210000 00         A  3039    	LD	IX,0
040A1A DD39                A  3040    	ADD	IX,SP
                           A  3041    ;  318		vdp_spriteSelect(id);
                           A  3042    .LINE 318
                           A  3043    
040A1C DD4E06              A  3044    	LD	C,(IX+%6)
040A1F 0600                A  3045    	LD	B,%0
040A21 C5                  A  3046    	PUSH	BC
040A22 CD BF 08 04         A  3047    	CALL	_vdp_spriteSelect
040A26 C1                  A  3048    	POP	BC
                           A  3049    ;  319		vdp_spritePreviousFrameSelected();
                           A  3050    .LINE 319
                           A  3051    
040A27 CD E7 09 04         A  3052    	CALL	_vdp_spritePreviousFrameSelected
                           A  3053    ;  320		return;
                           A  3054    ;  321	}
                           A  3055    .LINE 321
                           A  3056    
040A2B DDF9                A  3057    	LD	SP,IX
040A2D DDE1                A  3058    	POP	IX
040A2F C9                  A  3059    	RET	
                           A  3060    
                           A  3061    
                           A  3062    ;**************************** _vdp_spritePrevio
                           A  3063    ;Name                         Addr/Register   S
                           A  3064    ;_vdp_spritePreviousFrameSelected      IMPORT  
                           A  3065    ;_vdp_spriteSelect                   IMPORT  --
                           A  3066    ;id                                    IX+6    
                           A  3067    
                           A  3068    
                           A  3069    ; Stack Frame Size: 9 (bytes)
                           A  3070    ;       Spill Code: 0 (instruction)
                           A  3071    
                           A  3072    
                           A  3073    .ENDFUNC "vdp_spritePreviousFrame",321,"_vdp_sp
                           A  3074    ;  322	
                           A  3075    ;  323	void vdp_spriteSetFrameSelected(UINT8 f
                           A  3076    ;  324	{
040A30                     A  3077    _vdp_spriteSetFrameSelected:
                           A  3078    .DEFINE "_vdp_spriteSetFrameSelected"
                           A  3079    
                           A  3080    .VALUE _vdp_spriteSetFrameSelected
                           A  3081    
                           A  3082    .CLASS 2
                           A  3083    
                           A  3084    .TYPE 65
                           A  3085    
                           A  3086    .ENDEF
                           A  3087    
                           A  3088    .BEGFUNC "vdp_spriteSetFrameSelected",324,"_vdp
                           A  3089    
                           A  3090    .LINE 324
                           A  3091    
                           A  3092    .DEFINE "framenumber"
                           A  3093    
                           A  3094    .CLASS 65
                           A  3095    
                           A  3096    .VALUE 6
                           A  3097    
                           A  3098    .TYPE 12
                           A  3099    
                           A  3100    .ENDEF
                           A  3101    
040A30 DDE5                A  3102    	PUSH	IX
040A32 DD210000 00         A  3103    	LD	IX,0
040A37 DD39                A  3104    	ADD	IX,SP
                           A  3105    ;  325		putch(23); // vdu_sys
                           A  3106    .LINE 325
                           A  3107    
040A39 01170000            A  3108    	LD	BC,23
040A3D C5                  A  3109    	PUSH	BC
040A3E CD 5F 29 04         A  3110    	CALL	_putch
040A42 C1                  A  3111    	POP	BC
                           A  3112    ;  326		putch(27); // sprite command
                           A  3113    .LINE 326
                           A  3114    
040A43 011B0000            A  3115    	LD	BC,27
040A47 C5                  A  3116    	PUSH	BC
040A48 CD 5F 29 04         A  3117    	CALL	_putch
040A4C C1                  A  3118    	POP	BC
                           A  3119    ;  327		putch(10); // set current frame
                           A  3120    .LINE 327
                           A  3121    
040A4D 010A0000            A  3122    	LD	BC,10
040A51 C5                  A  3123    	PUSH	BC
040A52 CD 5F 29 04         A  3124    	CALL	_putch
040A56 C1                  A  3125    	POP	BC
                           A  3126    ;  328		putch(framenumber);
                           A  3127    .LINE 328
                           A  3128    
040A57 DD7E06              A  3129    	LD	A,(IX+%6)
040A5A B7ED62              A  3130    	UEXT	HL
040A5D 6F                  A  3131    	LD	L,A
040A5E E5                  A  3132    	PUSH	HL
040A5F CD 5F 29 04         A  3133    	CALL	_putch
040A63 C1                  A  3134    	POP	BC
                           A  3135    ;  329		return;	
                           A  3136    ;  330	}
                           A  3137    .LINE 330
                           A  3138    
040A64 DDF9                A  3139    	LD	SP,IX
040A66 DDE1                A  3140    	POP	IX
040A68 C9                  A  3141    	RET	
                           A  3142    
                           A  3143    
                           A  3144    ;**************************** _vdp_spriteSetFra
                           A  3145    ;Name                         Addr/Register   S
                           A  3146    ;_putch                              IMPORT  --
                           A  3147    ;framenumber                           IX+6    
                           A  3148    
                           A  3149    
                           A  3150    ; Stack Frame Size: 9 (bytes)
                           A  3151    ;       Spill Code: 0 (instruction)
                           A  3152    
                           A  3153    
                           A  3154    .ENDFUNC "vdp_spriteSetFrameSelected",330,"_vdp
                           A  3155    ;  331	
                           A  3156    ;  332	void vdp_spriteSetFrame(UINT8 id, UINT8
                           A  3157    ;  333	{
040A69                     A  3158    _vdp_spriteSetFrame:
                           A  3159    .DEFINE "_vdp_spriteSetFrame"
                           A  3160    
                           A  3161    .VALUE _vdp_spriteSetFrame
                           A  3162    
                           A  3163    .CLASS 2
                           A  3164    
                           A  3165    .TYPE 65
                           A  3166    
                           A  3167    .ENDEF
                           A  3168    
                           A  3169    .BEGFUNC "vdp_spriteSetFrame",333,"_vdp_spriteS
                           A  3170    
                           A  3171    .LINE 333
                           A  3172    
                           A  3173    .DEFINE "id"
                           A  3174    
                           A  3175    .CLASS 65
                           A  3176    
                           A  3177    .VALUE 6
                           A  3178    
                           A  3179    .TYPE 12
                           A  3180    
                           A  3181    .ENDEF
                           A  3182    
                           A  3183    .DEFINE "framenumber"
                           A  3184    
                           A  3185    .CLASS 65
                           A  3186    
                           A  3187    .VALUE 9
                           A  3188    
                           A  3189    .TYPE 12
                           A  3190    
                           A  3191    .ENDEF
                           A  3192    
040A69 DDE5                A  3193    	PUSH	IX
040A6B DD210000 00         A  3194    	LD	IX,0
040A70 DD39                A  3195    	ADD	IX,SP
                           A  3196    ;  334		vdp_spriteSelect(id);
                           A  3197    .LINE 334
                           A  3198    
040A72 DD4E06              A  3199    	LD	C,(IX+%6)
040A75 0600                A  3200    	LD	B,%0
040A77 C5                  A  3201    	PUSH	BC
040A78 CD BF 08 04         A  3202    	CALL	_vdp_spriteSelect
040A7C C1                  A  3203    	POP	BC
                           A  3204    ;  335		vdp_spriteSetFrameSelected(framenum
                           A  3205    .LINE 335
                           A  3206    
040A7D DD4E09              A  3207    	LD	C,(IX+%9)
040A80 0600                A  3208    	LD	B,%0
040A82 C5                  A  3209    	PUSH	BC
040A83 CD 30 0A 04         A  3210    	CALL	_vdp_spriteSetFrameSelected
040A87 C1                  A  3211    	POP	BC
                           A  3212    ;  336		return;
                           A  3213    ;  337	}
                           A  3214    .LINE 337
                           A  3215    
040A88 DDF9                A  3216    	LD	SP,IX
040A8A DDE1                A  3217    	POP	IX
040A8C C9                  A  3218    	RET	
                           A  3219    
                           A  3220    
                           A  3221    ;**************************** _vdp_spriteSetFra
                           A  3222    ;Name                         Addr/Register   S
                           A  3223    ;_vdp_spriteSetFrameSelected         IMPORT  --
                           A  3224    ;_vdp_spriteSelect                   IMPORT  --
                           A  3225    ;framenumber                           IX+9    
                           A  3226    ;id                                    IX+6    
                           A  3227    
                           A  3228    
                           A  3229    ; Stack Frame Size: 12 (bytes)
                           A  3230    ;       Spill Code: 0 (instruction)
                           A  3231    
                           A  3232    
                           A  3233    .ENDFUNC "vdp_spriteSetFrame",337,"_vdp_spriteS
                           A  3234    ;  338	
                           A  3235    ;  339	void vdp_spriteShowSelected(void)
                           A  3236    ;  340	{
040A8D                     A  3237    _vdp_spriteShowSelected:
                           A  3238    .DEFINE "_vdp_spriteShowSelected"
                           A  3239    
                           A  3240    .VALUE _vdp_spriteShowSelected
                           A  3241    
                           A  3242    .CLASS 2
                           A  3243    
                           A  3244    .TYPE 65
                           A  3245    
                           A  3246    .ENDEF
                           A  3247    
                           A  3248    .BEGFUNC "vdp_spriteShowSelected",340,"_vdp_spr
                           A  3249    
040A8D DDE5                A  3250    	PUSH	IX
040A8F DD210000 00         A  3251    	LD	IX,0
040A94 DD39                A  3252    	ADD	IX,SP
                           A  3253    ;  341		putch(23); // vdu_sys
                           A  3254    .LINE 341
                           A  3255    
040A96 01170000            A  3256    	LD	BC,23
040A9A C5                  A  3257    	PUSH	BC
040A9B CD 5F 29 04         A  3258    	CALL	_putch
040A9F C1                  A  3259    	POP	BC
                           A  3260    ;  342		putch(27); // sprite command
                           A  3261    .LINE 342
                           A  3262    
040AA0 011B0000            A  3263    	LD	BC,27
040AA4 C5                  A  3264    	PUSH	BC
040AA5 CD 5F 29 04         A  3265    	CALL	_putch
040AA9 C1                  A  3266    	POP	BC
                           A  3267    ;  343		putch(11); // show sprite
                           A  3268    .LINE 343
                           A  3269    
040AAA 010B0000            A  3270    	LD	BC,11
040AAE C5                  A  3271    	PUSH	BC
040AAF CD 5F 29 04         A  3272    	CALL	_putch
040AB3 C1                  A  3273    	POP	BC
                           A  3274    ;  344		return;			
                           A  3275    ;  345	}
                           A  3276    .LINE 345
                           A  3277    
040AB4 DDF9                A  3278    	LD	SP,IX
040AB6 DDE1                A  3279    	POP	IX
040AB8 C9                  A  3280    	RET	
                           A  3281    
                           A  3282    
                           A  3283    ;**************************** _vdp_spriteShowSe
                           A  3284    ;Name                         Addr/Register   S
                           A  3285    ;_putch                              IMPORT  --
                           A  3286    
                           A  3287    
                           A  3288    ; Stack Frame Size: 6 (bytes)
                           A  3289    ;       Spill Code: 0 (instruction)
                           A  3290    
                           A  3291    
                           A  3292    .ENDFUNC "vdp_spriteShowSelected",345,"_vdp_spr
                           A  3293    ;  346	
                           A  3294    ;  347	void vdp_spriteShow(UINT8 id)
                           A  3295    ;  348	{
040AB9                     A  3296    _vdp_spriteShow:
                           A  3297    .DEFINE "_vdp_spriteShow"
                           A  3298    
                           A  3299    .VALUE _vdp_spriteShow
                           A  3300    
                           A  3301    .CLASS 2
                           A  3302    
                           A  3303    .TYPE 65
                           A  3304    
                           A  3305    .ENDEF
                           A  3306    
                           A  3307    .BEGFUNC "vdp_spriteShow",348,"_vdp_spriteShow"
                           A  3308    
                           A  3309    .LINE 348
                           A  3310    
                           A  3311    .DEFINE "id"
                           A  3312    
                           A  3313    .CLASS 65
                           A  3314    
                           A  3315    .VALUE 6
                           A  3316    
                           A  3317    .TYPE 12
                           A  3318    
                           A  3319    .ENDEF
                           A  3320    
040AB9 DDE5                A  3321    	PUSH	IX
040ABB DD210000 00         A  3322    	LD	IX,0
040AC0 DD39                A  3323    	ADD	IX,SP
                           A  3324    ;  349		vdp_spriteSelect(id);
                           A  3325    .LINE 349
                           A  3326    
040AC2 DD4E06              A  3327    	LD	C,(IX+%6)
040AC5 0600                A  3328    	LD	B,%0
040AC7 C5                  A  3329    	PUSH	BC
040AC8 CD BF 08 04         A  3330    	CALL	_vdp_spriteSelect
040ACC C1                  A  3331    	POP	BC
                           A  3332    ;  350		vdp_spriteShowSelected();
                           A  3333    .LINE 350
                           A  3334    
040ACD CD 8D 0A 04         A  3335    	CALL	_vdp_spriteShowSelected
                           A  3336    ;  351		return;
                           A  3337    ;  352	}
                           A  3338    .LINE 352
                           A  3339    
040AD1 DDF9                A  3340    	LD	SP,IX
040AD3 DDE1                A  3341    	POP	IX
040AD5 C9                  A  3342    	RET	
                           A  3343    
                           A  3344    
                           A  3345    ;**************************** _vdp_spriteShow *
                           A  3346    ;Name                         Addr/Register   S
                           A  3347    ;_vdp_spriteShowSelected             IMPORT  --
                           A  3348    ;_vdp_spriteSelect                   IMPORT  --
                           A  3349    ;id                                    IX+6    
                           A  3350    
                           A  3351    
                           A  3352    ; Stack Frame Size: 9 (bytes)
                           A  3353    ;       Spill Code: 0 (instruction)
                           A  3354    
                           A  3355    
                           A  3356    .ENDFUNC "vdp_spriteShow",352,"_vdp_spriteShow"
                           A  3357    ;  353	
                           A  3358    ;  354	void vdp_spriteHideSelected(void)
                           A  3359    ;  355	{
040AD6                     A  3360    _vdp_spriteHideSelected:
                           A  3361    .DEFINE "_vdp_spriteHideSelected"
                           A  3362    
                           A  3363    .VALUE _vdp_spriteHideSelected
                           A  3364    
                           A  3365    .CLASS 2
                           A  3366    
                           A  3367    .TYPE 65
                           A  3368    
                           A  3369    .ENDEF
                           A  3370    
                           A  3371    .BEGFUNC "vdp_spriteHideSelected",355,"_vdp_spr
                           A  3372    
040AD6 DDE5                A  3373    	PUSH	IX
040AD8 DD210000 00         A  3374    	LD	IX,0
040ADD DD39                A  3375    	ADD	IX,SP
                           A  3376    ;  356		putch(23); // vdu_sys
                           A  3377    .LINE 356
                           A  3378    
040ADF 01170000            A  3379    	LD	BC,23
040AE3 C5                  A  3380    	PUSH	BC
040AE4 CD 5F 29 04         A  3381    	CALL	_putch
040AE8 C1                  A  3382    	POP	BC
                           A  3383    ;  357		putch(27); // sprite command
                           A  3384    .LINE 357
                           A  3385    
040AE9 011B0000            A  3386    	LD	BC,27
040AED C5                  A  3387    	PUSH	BC
040AEE CD 5F 29 04         A  3388    	CALL	_putch
040AF2 C1                  A  3389    	POP	BC
                           A  3390    ;  358		putch(12); // hide sprite
                           A  3391    .LINE 358
                           A  3392    
040AF3 010C0000            A  3393    	LD	BC,12
040AF7 C5                  A  3394    	PUSH	BC
040AF8 CD 5F 29 04         A  3395    	CALL	_putch
040AFC C1                  A  3396    	POP	BC
                           A  3397    ;  359		return;		
                           A  3398    ;  360	}
                           A  3399    .LINE 360
                           A  3400    
040AFD DDF9                A  3401    	LD	SP,IX
040AFF DDE1                A  3402    	POP	IX
040B01 C9                  A  3403    	RET	
                           A  3404    
                           A  3405    
                           A  3406    ;**************************** _vdp_spriteHideSe
                           A  3407    ;Name                         Addr/Register   S
                           A  3408    ;_putch                              IMPORT  --
                           A  3409    
                           A  3410    
                           A  3411    ; Stack Frame Size: 6 (bytes)
                           A  3412    ;       Spill Code: 0 (instruction)
                           A  3413    
                           A  3414    
                           A  3415    .ENDFUNC "vdp_spriteHideSelected",360,"_vdp_spr
                           A  3416    ;  361	
                           A  3417    ;  362	void vdp_spriteHide(UINT8 id)
                           A  3418    ;  363	{
040B02                     A  3419    _vdp_spriteHide:
                           A  3420    .DEFINE "_vdp_spriteHide"
                           A  3421    
                           A  3422    .VALUE _vdp_spriteHide
                           A  3423    
                           A  3424    .CLASS 2
                           A  3425    
                           A  3426    .TYPE 65
                           A  3427    
                           A  3428    .ENDEF
                           A  3429    
                           A  3430    .BEGFUNC "vdp_spriteHide",363,"_vdp_spriteHide"
                           A  3431    
                           A  3432    .LINE 363
                           A  3433    
                           A  3434    .DEFINE "id"
                           A  3435    
                           A  3436    .CLASS 65
                           A  3437    
                           A  3438    .VALUE 6
                           A  3439    
                           A  3440    .TYPE 12
                           A  3441    
                           A  3442    .ENDEF
                           A  3443    
040B02 DDE5                A  3444    	PUSH	IX
040B04 DD210000 00         A  3445    	LD	IX,0
040B09 DD39                A  3446    	ADD	IX,SP
                           A  3447    ;  364		vdp_spriteSelect(id);
                           A  3448    .LINE 364
                           A  3449    
040B0B DD4E06              A  3450    	LD	C,(IX+%6)
040B0E 0600                A  3451    	LD	B,%0
040B10 C5                  A  3452    	PUSH	BC
040B11 CD BF 08 04         A  3453    	CALL	_vdp_spriteSelect
040B15 C1                  A  3454    	POP	BC
                           A  3455    ;  365		vdp_spriteHideSelected();
                           A  3456    .LINE 365
                           A  3457    
040B16 CD D6 0A 04         A  3458    	CALL	_vdp_spriteHideSelected
                           A  3459    ;  366		return;
                           A  3460    ;  367	}
                           A  3461    .LINE 367
                           A  3462    
040B1A DDF9                A  3463    	LD	SP,IX
040B1C DDE1                A  3464    	POP	IX
040B1E C9                  A  3465    	RET	
                           A  3466    
                           A  3467    
                           A  3468    ;**************************** _vdp_spriteHide *
                           A  3469    ;Name                         Addr/Register   S
                           A  3470    ;_vdp_spriteHideSelected             IMPORT  --
                           A  3471    ;_vdp_spriteSelect                   IMPORT  --
                           A  3472    ;id                                    IX+6    
                           A  3473    
                           A  3474    
                           A  3475    ; Stack Frame Size: 9 (bytes)
                           A  3476    ;       Spill Code: 0 (instruction)
                           A  3477    
                           A  3478    
                           A  3479    .ENDFUNC "vdp_spriteHide",367,"_vdp_spriteHide"
                           A  3480    ;  368	
                           A  3481    ;  369	void vdp_spriteMoveToSelected(UINT16 x,
                           A  3482    ;  370	{
040B1F                     A  3483    _vdp_spriteMoveToSelected:
                           A  3484    .DEFINE "_vdp_spriteMoveToSelected"
                           A  3485    
                           A  3486    .VALUE _vdp_spriteMoveToSelected
                           A  3487    
                           A  3488    .CLASS 2
                           A  3489    
                           A  3490    .TYPE 65
                           A  3491    
                           A  3492    .ENDEF
                           A  3493    
                           A  3494    .BEGFUNC "vdp_spriteMoveToSelected",370,"_vdp_s
                           A  3495    
                           A  3496    .LINE 370
                           A  3497    
                           A  3498    .DEFINE "x"
                           A  3499    
                           A  3500    .CLASS 65
                           A  3501    
                           A  3502    .VALUE 6
                           A  3503    
                           A  3504    .TYPE 13
                           A  3505    
                           A  3506    .ENDEF
                           A  3507    
                           A  3508    .DEFINE "y"
                           A  3509    
                           A  3510    .CLASS 65
                           A  3511    
                           A  3512    .VALUE 9
                           A  3513    
                           A  3514    .TYPE 13
                           A  3515    
                           A  3516    .ENDEF
                           A  3517    
040B1F DDE5                A  3518    	PUSH	IX
040B21 DD210000 00         A  3519    	LD	IX,0
040B26 DD39                A  3520    	ADD	IX,SP
                           A  3521    ;  371		putch(23); // vdu_sys
                           A  3522    .LINE 371
                           A  3523    
040B28 01170000            A  3524    	LD	BC,23
040B2C C5                  A  3525    	PUSH	BC
040B2D CD 5F 29 04         A  3526    	CALL	_putch
040B31 C1                  A  3527    	POP	BC
                           A  3528    ;  372		putch(27); // sprite command
                           A  3529    .LINE 372
                           A  3530    
040B32 011B0000            A  3531    	LD	BC,27
040B36 C5                  A  3532    	PUSH	BC
040B37 CD 5F 29 04         A  3533    	CALL	_putch
040B3B C1                  A  3534    	POP	BC
                           A  3535    ;  373		putch(13); // move to
                           A  3536    .LINE 373
                           A  3537    
040B3C 010D0000            A  3538    	LD	BC,13
040B40 C5                  A  3539    	PUSH	BC
040B41 CD 5F 29 04         A  3540    	CALL	_putch
040B45 C1                  A  3541    	POP	BC
                           A  3542    ;  374		write16bit(x);
                           A  3543    .LINE 374
                           A  3544    
040B46 DD0706              A  3545    	LD	BC,(IX+%6)
040B49 C5                  A  3546    	PUSH	BC
040B4A CD EA 02 04         A  3547    	CALL	_write16bit
040B4E C1                  A  3548    	POP	BC
                           A  3549    ;  375		write16bit(y);
                           A  3550    .LINE 375
                           A  3551    
040B4F DD0709              A  3552    	LD	BC,(IX+%9)
040B52 C5                  A  3553    	PUSH	BC
040B53 CD EA 02 04         A  3554    	CALL	_write16bit
040B57 C1                  A  3555    	POP	BC
                           A  3556    ;  376		return;	
                           A  3557    ;  377	}
                           A  3558    .LINE 377
                           A  3559    
040B58 DDF9                A  3560    	LD	SP,IX
040B5A DDE1                A  3561    	POP	IX
040B5C C9                  A  3562    	RET	
                           A  3563    
                           A  3564    
                           A  3565    ;**************************** _vdp_spriteMoveTo
                           A  3566    ;Name                         Addr/Register   S
                           A  3567    ;_putch                              IMPORT  --
                           A  3568    ;y                                     IX+9    
                           A  3569    ;x                                     IX+6    
                           A  3570    
                           A  3571    
                           A  3572    ; Stack Frame Size: 12 (bytes)
                           A  3573    ;       Spill Code: 0 (instruction)
                           A  3574    
                           A  3575    
                           A  3576    .ENDFUNC "vdp_spriteMoveToSelected",377,"_vdp_s
                           A  3577    ;  378	
                           A  3578    ;  379	void vdp_spriteMoveTo(UINT8 id, UINT16 
                           A  3579    ;  380	{
040B5D                     A  3580    _vdp_spriteMoveTo:
                           A  3581    .DEFINE "_vdp_spriteMoveTo"
                           A  3582    
                           A  3583    .VALUE _vdp_spriteMoveTo
                           A  3584    
                           A  3585    .CLASS 2
                           A  3586    
                           A  3587    .TYPE 65
                           A  3588    
                           A  3589    .ENDEF
                           A  3590    
                           A  3591    .BEGFUNC "vdp_spriteMoveTo",380,"_vdp_spriteMov
                           A  3592    
                           A  3593    .LINE 380
                           A  3594    
                           A  3595    .DEFINE "id"
                           A  3596    
                           A  3597    .CLASS 65
                           A  3598    
                           A  3599    .VALUE 6
                           A  3600    
                           A  3601    .TYPE 12
                           A  3602    
                           A  3603    .ENDEF
                           A  3604    
                           A  3605    .DEFINE "x"
                           A  3606    
                           A  3607    .CLASS 65
                           A  3608    
                           A  3609    .VALUE 9
                           A  3610    
                           A  3611    .TYPE 13
                           A  3612    
                           A  3613    .ENDEF
                           A  3614    
                           A  3615    .DEFINE "y"
                           A  3616    
                           A  3617    .CLASS 65
                           A  3618    
                           A  3619    .VALUE 12
                           A  3620    
                           A  3621    .TYPE 13
                           A  3622    
                           A  3623    .ENDEF
                           A  3624    
040B5D DDE5                A  3625    	PUSH	IX
040B5F DD210000 00         A  3626    	LD	IX,0
040B64 DD39                A  3627    	ADD	IX,SP
                           A  3628    ;  381		vdp_spriteSelect(id);
                           A  3629    .LINE 381
                           A  3630    
040B66 DD4E06              A  3631    	LD	C,(IX+%6)
040B69 0600                A  3632    	LD	B,%0
040B6B C5                  A  3633    	PUSH	BC
040B6C CD BF 08 04         A  3634    	CALL	_vdp_spriteSelect
040B70 C1                  A  3635    	POP	BC
                           A  3636    ;  382		vdp_spriteMoveToSelected(x,y);
                           A  3637    .LINE 382
                           A  3638    
040B71 DD070C              A  3639    	LD	BC,(IX+%C)
040B74 C5                  A  3640    	PUSH	BC
040B75 DD0709              A  3641    	LD	BC,(IX+%9)
040B78 C5                  A  3642    	PUSH	BC
040B79 CD 1F 0B 04         A  3643    	CALL	_vdp_spriteMoveToSelected
040B7D C1                  A  3644    	POP	BC
040B7E C1                  A  3645    	POP	BC
                           A  3646    ;  383		return;
                           A  3647    ;  384	}
                           A  3648    .LINE 384
                           A  3649    
040B7F DDF9                A  3650    	LD	SP,IX
040B81 DDE1                A  3651    	POP	IX
040B83 C9                  A  3652    	RET	
                           A  3653    
                           A  3654    
                           A  3655    ;**************************** _vdp_spriteMoveTo
                           A  3656    ;Name                         Addr/Register   S
                           A  3657    ;_vdp_spriteMoveToSelected           IMPORT  --
                           A  3658    ;_vdp_spriteSelect                   IMPORT  --
                           A  3659    ;y                                    IX+12    
                           A  3660    ;x                                     IX+9    
                           A  3661    ;id                                    IX+6    
                           A  3662    
                           A  3663    
                           A  3664    ; Stack Frame Size: 15 (bytes)
                           A  3665    ;       Spill Code: 0 (instruction)
                           A  3666    
                           A  3667    
                           A  3668    .ENDFUNC "vdp_spriteMoveTo",384,"_vdp_spriteMov
                           A  3669    ;  385	
                           A  3670    ;  386	void vdp_spriteMoveBySelected(UINT16 x,
                           A  3671    ;  387	{
040B84                     A  3672    _vdp_spriteMoveBySelected:
                           A  3673    .DEFINE "_vdp_spriteMoveBySelected"
                           A  3674    
                           A  3675    .VALUE _vdp_spriteMoveBySelected
                           A  3676    
                           A  3677    .CLASS 2
                           A  3678    
                           A  3679    .TYPE 65
                           A  3680    
                           A  3681    .ENDEF
                           A  3682    
                           A  3683    .BEGFUNC "vdp_spriteMoveBySelected",387,"_vdp_s
                           A  3684    
                           A  3685    .LINE 387
                           A  3686    
                           A  3687    .DEFINE "x"
                           A  3688    
                           A  3689    .CLASS 65
                           A  3690    
                           A  3691    .VALUE 6
                           A  3692    
                           A  3693    .TYPE 13
                           A  3694    
                           A  3695    .ENDEF
                           A  3696    
                           A  3697    .DEFINE "y"
                           A  3698    
                           A  3699    .CLASS 65
                           A  3700    
                           A  3701    .VALUE 9
                           A  3702    
                           A  3703    .TYPE 13
                           A  3704    
                           A  3705    .ENDEF
                           A  3706    
040B84 DDE5                A  3707    	PUSH	IX
040B86 DD210000 00         A  3708    	LD	IX,0
040B8B DD39                A  3709    	ADD	IX,SP
                           A  3710    ;  388		putch(23); // vdu_sys
                           A  3711    .LINE 388
                           A  3712    
040B8D 01170000            A  3713    	LD	BC,23
040B91 C5                  A  3714    	PUSH	BC
040B92 CD 5F 29 04         A  3715    	CALL	_putch
040B96 C1                  A  3716    	POP	BC
                           A  3717    ;  389		putch(27); // sprite command
                           A  3718    .LINE 389
                           A  3719    
040B97 011B0000            A  3720    	LD	BC,27
040B9B C5                  A  3721    	PUSH	BC
040B9C CD 5F 29 04         A  3722    	CALL	_putch
040BA0 C1                  A  3723    	POP	BC
                           A  3724    ;  390		putch(14); // move by
                           A  3725    .LINE 390
                           A  3726    
040BA1 010E0000            A  3727    	LD	BC,14
040BA5 C5                  A  3728    	PUSH	BC
040BA6 CD 5F 29 04         A  3729    	CALL	_putch
040BAA C1                  A  3730    	POP	BC
                           A  3731    ;  391		write16bit(x);
                           A  3732    .LINE 391
                           A  3733    
040BAB DD0706              A  3734    	LD	BC,(IX+%6)
040BAE C5                  A  3735    	PUSH	BC
040BAF CD EA 02 04         A  3736    	CALL	_write16bit
040BB3 C1                  A  3737    	POP	BC
                           A  3738    ;  392		write16bit(y);
                           A  3739    .LINE 392
                           A  3740    
040BB4 DD0709              A  3741    	LD	BC,(IX+%9)
040BB7 C5                  A  3742    	PUSH	BC
040BB8 CD EA 02 04         A  3743    	CALL	_write16bit
040BBC C1                  A  3744    	POP	BC
                           A  3745    ;  393		return;	
                           A  3746    ;  394	}
                           A  3747    .LINE 394
                           A  3748    
040BBD DDF9                A  3749    	LD	SP,IX
040BBF DDE1                A  3750    	POP	IX
040BC1 C9                  A  3751    	RET	
                           A  3752    
                           A  3753    
                           A  3754    ;**************************** _vdp_spriteMoveBy
                           A  3755    ;Name                         Addr/Register   S
                           A  3756    ;_putch                              IMPORT  --
                           A  3757    ;y                                     IX+9    
                           A  3758    ;x                                     IX+6    
                           A  3759    
                           A  3760    
                           A  3761    ; Stack Frame Size: 12 (bytes)
                           A  3762    ;       Spill Code: 0 (instruction)
                           A  3763    
                           A  3764    
                           A  3765    .ENDFUNC "vdp_spriteMoveBySelected",394,"_vdp_s
                           A  3766    ;  395	
                           A  3767    ;  396	void vdp_spriteMoveBy(UINT8 id, UINT16 
                           A  3768    ;  397	{
040BC2                     A  3769    _vdp_spriteMoveBy:
                           A  3770    .DEFINE "_vdp_spriteMoveBy"
                           A  3771    
                           A  3772    .VALUE _vdp_spriteMoveBy
                           A  3773    
                           A  3774    .CLASS 2
                           A  3775    
                           A  3776    .TYPE 65
                           A  3777    
                           A  3778    .ENDEF
                           A  3779    
                           A  3780    .BEGFUNC "vdp_spriteMoveBy",397,"_vdp_spriteMov
                           A  3781    
                           A  3782    .LINE 397
                           A  3783    
                           A  3784    .DEFINE "id"
                           A  3785    
                           A  3786    .CLASS 65
                           A  3787    
                           A  3788    .VALUE 6
                           A  3789    
                           A  3790    .TYPE 12
                           A  3791    
                           A  3792    .ENDEF
                           A  3793    
                           A  3794    .DEFINE "x"
                           A  3795    
                           A  3796    .CLASS 65
                           A  3797    
                           A  3798    .VALUE 9
                           A  3799    
                           A  3800    .TYPE 13
                           A  3801    
                           A  3802    .ENDEF
                           A  3803    
                           A  3804    .DEFINE "y"
                           A  3805    
                           A  3806    .CLASS 65
                           A  3807    
                           A  3808    .VALUE 12
                           A  3809    
                           A  3810    .TYPE 13
                           A  3811    
                           A  3812    .ENDEF
                           A  3813    
040BC2 DDE5                A  3814    	PUSH	IX
040BC4 DD210000 00         A  3815    	LD	IX,0
040BC9 DD39                A  3816    	ADD	IX,SP
                           A  3817    ;  398		vdp_spriteSelect(id);
                           A  3818    .LINE 398
                           A  3819    
040BCB DD4E06              A  3820    	LD	C,(IX+%6)
040BCE 0600                A  3821    	LD	B,%0
040BD0 C5                  A  3822    	PUSH	BC
040BD1 CD BF 08 04         A  3823    	CALL	_vdp_spriteSelect
040BD5 C1                  A  3824    	POP	BC
                           A  3825    ;  399		vdp_spriteMoveBySelected(x,y);
                           A  3826    .LINE 399
                           A  3827    
040BD6 DD070C              A  3828    	LD	BC,(IX+%C)
040BD9 C5                  A  3829    	PUSH	BC
040BDA DD0709              A  3830    	LD	BC,(IX+%9)
040BDD C5                  A  3831    	PUSH	BC
040BDE CD 84 0B 04         A  3832    	CALL	_vdp_spriteMoveBySelected
040BE2 C1                  A  3833    	POP	BC
040BE3 C1                  A  3834    	POP	BC
                           A  3835    ;  400		return;
                           A  3836    ;  401	}
                           A  3837    .LINE 401
                           A  3838    
040BE4 DDF9                A  3839    	LD	SP,IX
040BE6 DDE1                A  3840    	POP	IX
040BE8 C9                  A  3841    	RET	
                           A  3842    
                           A  3843    
                           A  3844    ;**************************** _vdp_spriteMoveBy
                           A  3845    ;Name                         Addr/Register   S
                           A  3846    ;_vdp_spriteMoveBySelected           IMPORT  --
                           A  3847    ;_vdp_spriteSelect                   IMPORT  --
                           A  3848    ;y                                    IX+12    
                           A  3849    ;x                                     IX+9    
                           A  3850    ;id                                    IX+6    
                           A  3851    
                           A  3852    
                           A  3853    ; Stack Frame Size: 15 (bytes)
                           A  3854    ;       Spill Code: 0 (instruction)
                           A  3855    
                           A  3856    
                           A  3857    .ENDFUNC "vdp_spriteMoveBy",401,"_vdp_spriteMov
                           A  3858    ;  402	
                           A  3859    ;  403	void vdp_spriteActivateTotal(UINT8 numb
                           A  3860    ;  404	{
040BE9                     A  3861    _vdp_spriteActivateTotal:
                           A  3862    .DEFINE "_vdp_spriteActivateTotal"
                           A  3863    
                           A  3864    .VALUE _vdp_spriteActivateTotal
                           A  3865    
                           A  3866    .CLASS 2
                           A  3867    
                           A  3868    .TYPE 65
                           A  3869    
                           A  3870    .ENDEF
                           A  3871    
                           A  3872    .BEGFUNC "vdp_spriteActivateTotal",404,"_vdp_sp
                           A  3873    
                           A  3874    .LINE 404
                           A  3875    
                           A  3876    .DEFINE "number"
                           A  3877    
                           A  3878    .CLASS 65
                           A  3879    
                           A  3880    .VALUE 6
                           A  3881    
                           A  3882    .TYPE 12
                           A  3883    
                           A  3884    .ENDEF
                           A  3885    
040BE9 DDE5                A  3886    	PUSH	IX
040BEB DD210000 00         A  3887    	LD	IX,0
040BF0 DD39                A  3888    	ADD	IX,SP
                           A  3889    ;  405		putch(23); // vdu_sys
                           A  3890    .LINE 405
                           A  3891    
040BF2 01170000            A  3892    	LD	BC,23
040BF6 C5                  A  3893    	PUSH	BC
040BF7 CD 5F 29 04         A  3894    	CALL	_putch
040BFB C1                  A  3895    	POP	BC
                           A  3896    ;  406		putch(27); // sprite command
                           A  3897    .LINE 406
                           A  3898    
040BFC 011B0000            A  3899    	LD	BC,27
040C00 C5                  A  3900    	PUSH	BC
040C01 CD 5F 29 04         A  3901    	CALL	_putch
040C05 C1                  A  3902    	POP	BC
                           A  3903    ;  407		putch(7);  // set number of sprites
                           A  3904    .LINE 407
                           A  3905    
040C06 01070000            A  3906    	LD	BC,7
040C0A C5                  A  3907    	PUSH	BC
040C0B CD 5F 29 04         A  3908    	CALL	_putch
040C0F C1                  A  3909    	POP	BC
                           A  3910    ;  408		putch(number);
                           A  3911    .LINE 408
                           A  3912    
040C10 DD7E06              A  3913    	LD	A,(IX+%6)
040C13 B7ED62              A  3914    	UEXT	HL
040C16 6F                  A  3915    	LD	L,A
040C17 E5                  A  3916    	PUSH	HL
040C18 CD 5F 29 04         A  3917    	CALL	_putch
040C1C C1                  A  3918    	POP	BC
                           A  3919    ;  409		return;	
                           A  3920    ;  410	}
                           A  3921    .LINE 410
                           A  3922    
040C1D DDF9                A  3923    	LD	SP,IX
040C1F DDE1                A  3924    	POP	IX
040C21 C9                  A  3925    	RET	
                           A  3926    
                           A  3927    
                           A  3928    ;**************************** _vdp_spriteActiva
                           A  3929    ;Name                         Addr/Register   S
                           A  3930    ;_putch                              IMPORT  --
                           A  3931    ;number                                IX+6    
                           A  3932    
                           A  3933    
                           A  3934    ; Stack Frame Size: 9 (bytes)
                           A  3935    ;       Spill Code: 0 (instruction)
                           A  3936    
                           A  3937    
                           A  3938    .ENDFUNC "vdp_spriteActivateTotal",410,"_vdp_sp
                           A  3939    ;  411	
                           A  3940    ;  412	void vdp_spriteRefresh(void)
                           A  3941    ;  413	{
040C22                     A  3942    _vdp_spriteRefresh:
                           A  3943    .DEFINE "_vdp_spriteRefresh"
                           A  3944    
                           A  3945    .VALUE _vdp_spriteRefresh
                           A  3946    
                           A  3947    .CLASS 2
                           A  3948    
                           A  3949    .TYPE 65
                           A  3950    
                           A  3951    .ENDEF
                           A  3952    
                           A  3953    .BEGFUNC "vdp_spriteRefresh",413,"_vdp_spriteRe
                           A  3954    
040C22 DDE5                A  3955    	PUSH	IX
040C24 DD210000 00         A  3956    	LD	IX,0
040C29 DD39                A  3957    	ADD	IX,SP
                           A  3958    ;  414		putch(23);	// vdu_sys
                           A  3959    .LINE 414
                           A  3960    
040C2B 01170000            A  3961    	LD	BC,23
040C2F C5                  A  3962    	PUSH	BC
040C30 CD 5F 29 04         A  3963    	CALL	_putch
040C34 C1                  A  3964    	POP	BC
                           A  3965    ;  415		putch(27);	// sprite command
                           A  3966    .LINE 415
                           A  3967    
040C35 011B0000            A  3968    	LD	BC,27
040C39 C5                  A  3969    	PUSH	BC
040C3A CD 5F 29 04         A  3970    	CALL	_putch
040C3E C1                  A  3971    	POP	BC
                           A  3972    ;  416		putch(15);	// refresh all sprites
                           A  3973    .LINE 416
                           A  3974    
040C3F 010F0000            A  3975    	LD	BC,15
040C43 C5                  A  3976    	PUSH	BC
040C44 CD 5F 29 04         A  3977    	CALL	_putch
040C48 C1                  A  3978    	POP	BC
                           A  3979    ;  417		return;
                           A  3980    ;  418	}
                           A  3981    .LINE 418
                           A  3982    
040C49 DDF9                A  3983    	LD	SP,IX
040C4B DDE1                A  3984    	POP	IX
040C4D C9                  A  3985    	RET	
                           A  3986    
                           A  3987    
                           A  3988    ;**************************** _vdp_spriteRefres
                           A  3989    ;Name                         Addr/Register   S
                           A  3990    ;_putch                              IMPORT  --
                           A  3991    
                           A  3992    
                           A  3993    ; Stack Frame Size: 6 (bytes)
                           A  3994    ;       Spill Code: 0 (instruction)
                           A  3995    
                           A  3996    
                           A  3997    .ENDFUNC "vdp_spriteRefresh",418,"_vdp_spriteRe
                           A  3998    ;  419	
                           A  3999    ;  420	UINT8 vdp_cursorGetXpos(void)
                           A  4000    ;  421	{
040C4E                     A  4001    _vdp_cursorGetXpos:
                           A  4002    .DEFINE "_vdp_cursorGetXpos"
                           A  4003    
                           A  4004    .VALUE _vdp_cursorGetXpos
                           A  4005    
                           A  4006    .CLASS 2
                           A  4007    
                           A  4008    .TYPE 76
                           A  4009    
                           A  4010    .ENDEF
                           A  4011    
                           A  4012    .BEGFUNC "vdp_cursorGetXpos",421,"_vdp_cursorGe
                           A  4013    
                           A  4014    .LINE 421
                           A  4015    
                           A  4016    .DEFINE "delay"
                           A  4017    
                           A  4018    .CLASS 65
                           A  4019    
                           A  4020    .VALUE -3
                           A  4021    
                           A  4022    .TYPE 14
                           A  4023    
                           A  4024    .ENDEF
                           A  4025    
040C4E DDE5                A  4026    	PUSH	IX
040C50 DD210000 00         A  4027    	LD	IX,0
040C55 DD39                A  4028    	ADD	IX,SP
040C57 C5                  A  4029    	PUSH	BC
                           A  4030    ;  422		unsigned int delay;
                           A  4031    ;  423		
                           A  4032    ;  424		putch(23);	// VDP command
                           A  4033    .LINE 424
                           A  4034    
040C58 01170000            A  4035    	LD	BC,23
040C5C C5                  A  4036    	PUSH	BC
040C5D CD 5F 29 04         A  4037    	CALL	_putch
040C61 C1                  A  4038    	POP	BC
                           A  4039    ;  425		putch(0);	// VDP command
                           A  4040    .LINE 425
                           A  4041    
040C62 01000000            A  4042    	LD	BC,0
040C66 C5                  A  4043    	PUSH	BC
040C67 CD 5F 29 04         A  4044    	CALL	_putch
040C6B C1                  A  4045    	POP	BC
                           A  4046    ;  426		putch(0x82);	// Request cursor p
                           A  4047    .LINE 426
                           A  4048    
040C6C 01820000            A  4049    	LD	BC,130
040C70 C5                  A  4050    	PUSH	BC
040C71 CD 5F 29 04         A  4051    	CALL	_putch
040C75 C1                  A  4052    	POP	BC
                           A  4053    ;  427		
                           A  4054    ;  428		delay = 255;
                           A  4055    .LINE 428
                           A  4056    
040C76 01FF0000            A  4057    	LD	BC,255
040C7A DD0FFD              A  4058    	LD	(IX+%FFFFFFFD),BC
                           A  4059    ;  429		while(delay--);
040C7D                     A  4060    L_56:
                           A  4061    .LINE 429
                           A  4062    
040C7D DD27FD              A  4063    	LD	HL,(IX+%FFFFFFFD)
040C80 DD31FD              A  4064    	LD	IY,(IX+%FFFFFFFD)
040C83 ED33FF              A  4065    	LEA	IY,IY+%FFFFFFFF
040C86 DD3EFD              A  4066    	LD	(IX+%FFFFFFFD),IY
040C89 CD B3 33 04         A  4067    	CALL	__icmpzero
040C8D 20 EE               A  4068    	JR	NZ,L_56
                           A  4069    ;  430		return(getsysvar_cursorX());
                           A  4070    .LINE 430
                           A  4071    
040C8F CD CE 29 04         A  4072    	CALL	_getsysvar_cursorX
                           A  4073    ;  431	
                           A  4074    ;  432	}
                           A  4075    .LINE 432
                           A  4076    
040C93 DDF9                A  4077    	LD	SP,IX
040C95 DDE1                A  4078    	POP	IX
040C97 C9                  A  4079    	RET	
                           A  4080    
                           A  4081    
                           A  4082    ;**************************** _vdp_cursorGetXpo
                           A  4083    ;Name                         Addr/Register   S
                           A  4084    ;_getsysvar_cursorX                  IMPORT  --
                           A  4085    ;_putch                              IMPORT  --
                           A  4086    ;delay                                 IX-3    
                           A  4087    
                           A  4088    
                           A  4089    ; Stack Frame Size: 9 (bytes)
                           A  4090    ;       Spill Code: 0 (instruction)
                           A  4091    
                           A  4092    
                           A  4093    .ENDFUNC "vdp_cursorGetXpos",432,"_vdp_cursorGe
                           A  4094    ;  433	
                           A  4095    ;  434	UINT8 vdp_cursorGetYpos(void)
                           A  4096    ;  435	{
040C98                     A  4097    _vdp_cursorGetYpos:
                           A  4098    .DEFINE "_vdp_cursorGetYpos"
                           A  4099    
                           A  4100    .VALUE _vdp_cursorGetYpos
                           A  4101    
                           A  4102    .CLASS 2
                           A  4103    
                           A  4104    .TYPE 76
                           A  4105    
                           A  4106    .ENDEF
                           A  4107    
                           A  4108    .BEGFUNC "vdp_cursorGetYpos",435,"_vdp_cursorGe
                           A  4109    
                           A  4110    .LINE 435
                           A  4111    
                           A  4112    .DEFINE "delay"
                           A  4113    
                           A  4114    .CLASS 65
                           A  4115    
                           A  4116    .VALUE -3
                           A  4117    
                           A  4118    .TYPE 14
                           A  4119    
                           A  4120    .ENDEF
                           A  4121    
040C98 DDE5                A  4122    	PUSH	IX
040C9A DD210000 00         A  4123    	LD	IX,0
040C9F DD39                A  4124    	ADD	IX,SP
040CA1 C5                  A  4125    	PUSH	BC
                           A  4126    ;  436		unsigned int delay;
                           A  4127    ;  437		
                           A  4128    ;  438		putch(23);	// VDP command
                           A  4129    .LINE 438
                           A  4130    
040CA2 01170000            A  4131    	LD	BC,23
040CA6 C5                  A  4132    	PUSH	BC
040CA7 CD 5F 29 04         A  4133    	CALL	_putch
040CAB C1                  A  4134    	POP	BC
                           A  4135    ;  439		putch(0);	// VDP command
                           A  4136    .LINE 439
                           A  4137    
040CAC 01000000            A  4138    	LD	BC,0
040CB0 C5                  A  4139    	PUSH	BC
040CB1 CD 5F 29 04         A  4140    	CALL	_putch
040CB5 C1                  A  4141    	POP	BC
                           A  4142    ;  440		putch(0x82);	// Request cursor p
                           A  4143    .LINE 440
                           A  4144    
040CB6 01820000            A  4145    	LD	BC,130
040CBA C5                  A  4146    	PUSH	BC
040CBB CD 5F 29 04         A  4147    	CALL	_putch
040CBF C1                  A  4148    	POP	BC
                           A  4149    ;  441		
                           A  4150    ;  442		delay = 255;
                           A  4151    .LINE 442
                           A  4152    
040CC0 01FF0000            A  4153    	LD	BC,255
040CC4 DD0FFD              A  4154    	LD	(IX+%FFFFFFFD),BC
                           A  4155    ;  443		while(delay--);
040CC7                     A  4156    L_61:
                           A  4157    .LINE 443
                           A  4158    
040CC7 DD27FD              A  4159    	LD	HL,(IX+%FFFFFFFD)
040CCA DD31FD              A  4160    	LD	IY,(IX+%FFFFFFFD)
040CCD ED33FF              A  4161    	LEA	IY,IY+%FFFFFFFF
040CD0 DD3EFD              A  4162    	LD	(IX+%FFFFFFFD),IY
040CD3 CD B3 33 04         A  4163    	CALL	__icmpzero
040CD7 20 EE               A  4164    	JR	NZ,L_61
                           A  4165    ;  444		return(getsysvar_cursorY());
                           A  4166    .LINE 444
                           A  4167    
040CD9 CD DA 29 04         A  4168    	CALL	_getsysvar_cursorY
                           A  4169    ;  445	}
                           A  4170    .LINE 445
                           A  4171    
040CDD DDF9                A  4172    	LD	SP,IX
040CDF DDE1                A  4173    	POP	IX
040CE1 C9                  A  4174    	RET	
                           A  4175    
                           A  4176    
                           A  4177    ;**************************** _vdp_cursorGetYpo
                           A  4178    ;Name                         Addr/Register   S
                           A  4179    ;_getsysvar_cursorY                  IMPORT  --
                           A  4180    ;_putch                              IMPORT  --
                           A  4181    ;delay                                 IX-3    
                           A  4182    
                           A  4183    
                           A  4184    ; Stack Frame Size: 9 (bytes)
                           A  4185    ;       Spill Code: 0 (instruction)
                           A  4186    
                           A  4187    
                           A  4188    .ENDFUNC "vdp_cursorGetYpos",445,"_vdp_cursorGe
                           A  4189    ;  446	
                           A  4190    ;  447	char vdp_asciiCodeAt(unsigned char x, u
                           A  4191    ;  448	{
040CE2                     A  4192    _vdp_asciiCodeAt:
                           A  4193    .DEFINE "_vdp_asciiCodeAt"
                           A  4194    
                           A  4195    .VALUE _vdp_asciiCodeAt
                           A  4196    
                           A  4197    .CLASS 2
                           A  4198    
                           A  4199    .TYPE 66
                           A  4200    
                           A  4201    .ENDEF
                           A  4202    
                           A  4203    .BEGFUNC "vdp_asciiCodeAt",448,"_vdp_asciiCodeA
                           A  4204    
                           A  4205    .LINE 448
                           A  4206    
                           A  4207    .DEFINE "x"
                           A  4208    
                           A  4209    .CLASS 65
                           A  4210    
                           A  4211    .VALUE 6
                           A  4212    
                           A  4213    .TYPE 12
                           A  4214    
                           A  4215    .ENDEF
                           A  4216    
                           A  4217    .DEFINE "y"
                           A  4218    
                           A  4219    .CLASS 65
                           A  4220    
                           A  4221    .VALUE 9
                           A  4222    
                           A  4223    .TYPE 12
                           A  4224    
                           A  4225    .ENDEF
                           A  4226    
                           A  4227    .DEFINE "delay"
                           A  4228    
                           A  4229    .CLASS 65
                           A  4230    
                           A  4231    .VALUE -3
                           A  4232    
                           A  4233    .TYPE 14
                           A  4234    
                           A  4235    .ENDEF
                           A  4236    
040CE2 DDE5                A  4237    	PUSH	IX
040CE4 DD210000 00         A  4238    	LD	IX,0
040CE9 DD39                A  4239    	ADD	IX,SP
040CEB C5                  A  4240    	PUSH	BC
                           A  4241    ;  449		unsigned int delay;
                           A  4242    ;  450		
                           A  4243    ;  451		putch(23);	// VDP command
                           A  4244    .LINE 451
                           A  4245    
040CEC 01170000            A  4246    	LD	BC,23
040CF0 C5                  A  4247    	PUSH	BC
040CF1 CD 5F 29 04         A  4248    	CALL	_putch
040CF5 C1                  A  4249    	POP	BC
                           A  4250    ;  452		putch(0);	// VDP command
                           A  4251    .LINE 452
                           A  4252    
040CF6 01000000            A  4253    	LD	BC,0
040CFA C5                  A  4254    	PUSH	BC
040CFB CD 5F 29 04         A  4255    	CALL	_putch
040CFF C1                  A  4256    	POP	BC
                           A  4257    ;  453		putch(0x83);	// Request ascii co
                           A  4258    .LINE 453
                           A  4259    
040D00 01830000            A  4260    	LD	BC,131
040D04 C5                  A  4261    	PUSH	BC
040D05 CD 5F 29 04         A  4262    	CALL	_putch
040D09 C1                  A  4263    	POP	BC
                           A  4264    ;  454		putch(x);
                           A  4265    .LINE 454
                           A  4266    
040D0A DD7E06              A  4267    	LD	A,(IX+%6)
040D0D B7ED62              A  4268    	UEXT	HL
040D10 6F                  A  4269    	LD	L,A
040D11 E5                  A  4270    	PUSH	HL
040D12 CD 5F 29 04         A  4271    	CALL	_putch
040D16 C1                  A  4272    	POP	BC
                           A  4273    ;  455		putch(0);
                           A  4274    .LINE 455
                           A  4275    
040D17 01000000            A  4276    	LD	BC,0
040D1B C5                  A  4277    	PUSH	BC
040D1C CD 5F 29 04         A  4278    	CALL	_putch
040D20 C1                  A  4279    	POP	BC
                           A  4280    ;  456		putch(y);
                           A  4281    .LINE 456
                           A  4282    
040D21 DD7E09              A  4283    	LD	A,(IX+%9)
040D24 B7ED62              A  4284    	UEXT	HL
040D27 6F                  A  4285    	LD	L,A
040D28 E5                  A  4286    	PUSH	HL
040D29 CD 5F 29 04         A  4287    	CALL	_putch
040D2D C1                  A  4288    	POP	BC
                           A  4289    ;  457		putch(0);
                           A  4290    .LINE 457
                           A  4291    
040D2E 01000000            A  4292    	LD	BC,0
040D32 C5                  A  4293    	PUSH	BC
040D33 CD 5F 29 04         A  4294    	CALL	_putch
040D37 C1                  A  4295    	POP	BC
                           A  4296    ;  458		
                           A  4297    ;  459		delay = 64000;
                           A  4298    .LINE 459
                           A  4299    
040D38 0100FA00            A  4300    	LD	BC,64000
040D3C DD0FFD              A  4301    	LD	(IX+%FFFFFFFD),BC
                           A  4302    ;  460		while(delay--);
040D3F                     A  4303    L_66:
                           A  4304    .LINE 460
                           A  4305    
040D3F DD27FD              A  4306    	LD	HL,(IX+%FFFFFFFD)
040D42 DD31FD              A  4307    	LD	IY,(IX+%FFFFFFFD)
040D45 ED33FF              A  4308    	LEA	IY,IY+%FFFFFFFF
040D48 DD3EFD              A  4309    	LD	(IX+%FFFFFFFD),IY
040D4B CD B3 33 04         A  4310    	CALL	__icmpzero
040D4F 20 EE               A  4311    	JR	NZ,L_66
                           A  4312    ;  461		return(getsysvar_scrchar());
                           A  4313    .LINE 461
                           A  4314    
040D51 CD E6 29 04         A  4315    	CALL	_getsysvar_scrchar
                           A  4316    ;  462	}
                           A  4317    .LINE 462
                           A  4318    
040D55 DDF9                A  4319    	LD	SP,IX
040D57 DDE1                A  4320    	POP	IX
040D59 C9                  A  4321    	RET	
                           A  4322    
                           A  4323    
                           A  4324    ;**************************** _vdp_asciiCodeAt 
                           A  4325    ;Name                         Addr/Register   S
                           A  4326    ;_getsysvar_scrchar                  IMPORT  --
                           A  4327    ;_putch                              IMPORT  --
                           A  4328    ;delay                                 IX-3    
                           A  4329    ;y                                     IX+9    
                           A  4330    ;x                                     IX+6    
                           A  4331    
                           A  4332    
                           A  4333    ; Stack Frame Size: 15 (bytes)
                           A  4334    ;       Spill Code: 0 (instruction)
                           A  4335    
                           A  4336    
                           A  4337    .ENDFUNC "vdp_asciiCodeAt",462,"_vdp_asciiCodeA
                           A  4338    ;  463	
                           A  4339    ;  464	void  vdp_setpagedMode(bool mode) {
040D5A                     A  4340    _vdp_setpagedMode:
                           A  4341    .DEFINE "_vdp_setpagedMode"
                           A  4342    
                           A  4343    .VALUE _vdp_setpagedMode
                           A  4344    
                           A  4345    .CLASS 2
                           A  4346    
                           A  4347    .TYPE 65
                           A  4348    
                           A  4349    .ENDEF
                           A  4350    
                           A  4351    .BEGFUNC "vdp_setpagedMode",464,"_vdp_setpagedM
                           A  4352    
                           A  4353    .LINE 464
                           A  4354    
                           A  4355    .DEFINE "mode"
                           A  4356    
                           A  4357    .CLASS 65
                           A  4358    
                           A  4359    .VALUE 6
                           A  4360    
                           A  4361    .TYPE 12
                           A  4362    
                           A  4363    .ENDEF
                           A  4364    
040D5A DDE5                A  4365    	PUSH	IX
040D5C DD210000 00         A  4366    	LD	IX,0
040D61 DD39                A  4367    	ADD	IX,SP
                           A  4368    ;  465		if(mode) putch(0x0E);
                           A  4369    .LINE 465
                           A  4370    
040D63 DD7E06              A  4371    	LD	A,(IX+%6)
040D66 B7                  A  4372    	OR	A,A
040D67 28 0C               A  4373    	JR	Z,L_70
040D69 010E0000            A  4374    	LD	BC,14
040D6D C5                  A  4375    	PUSH	BC
040D6E CD 5F 29 04         A  4376    	CALL	_putch
040D72 C1                  A  4377    	POP	BC
                           A  4378    ;  466		else putch(0x0F);
                           A  4379    .LINE 466
                           A  4380    
040D73 18 0A               A  4381    	JR	L_71
040D75                     A  4382    L_70:
040D75 010F0000            A  4383    	LD	BC,15
040D79 C5                  A  4384    	PUSH	BC
040D7A CD 5F 29 04         A  4385    	CALL	_putch
040D7E C1                  A  4386    	POP	BC
                           A  4387    ;  467	}
040D7F                     A  4388    L_71:
                           A  4389    .LINE 467
                           A  4390    
040D7F DDF9                A  4391    	LD	SP,IX
040D81 DDE1                A  4392    	POP	IX
040D83 C9                  A  4393    	RET	
                           A  4394    
                           A  4395    
                           A  4396    ;**************************** _vdp_setpagedMode
                           A  4397    ;Name                         Addr/Register   S
                           A  4398    ;_putch                              IMPORT  --
                           A  4399    ;mode                                  IX+6    
                           A  4400    
                           A  4401    
                           A  4402    ; Stack Frame Size: 9 (bytes)
                           A  4403    ;       Spill Code: 0 (instruction)
                           A  4404    
                           A  4405    
                           A  4406    .ENDFUNC "vdp_setpagedMode",467,"_vdp_setpagedM
                           A  4407    ;  468	
                           A  4408    ;  469	void vdp_cursorDisable(void)
                           A  4409    ;  470	{
040D84                     A  4410    _vdp_cursorDisable:
                           A  4411    .DEFINE "_vdp_cursorDisable"
                           A  4412    
                           A  4413    .VALUE _vdp_cursorDisable
                           A  4414    
                           A  4415    .CLASS 2
                           A  4416    
                           A  4417    .TYPE 65
                           A  4418    
                           A  4419    .ENDEF
                           A  4420    
                           A  4421    .BEGFUNC "vdp_cursorDisable",470,"_vdp_cursorDi
                           A  4422    
040D84 DDE5                A  4423    	PUSH	IX
040D86 DD210000 00         A  4424    	LD	IX,0
040D8B DD39                A  4425    	ADD	IX,SP
                           A  4426    ;  471		putch(23);
                           A  4427    .LINE 471
                           A  4428    
040D8D 01170000            A  4429    	LD	BC,23
040D91 C5                  A  4430    	PUSH	BC
040D92 CD 5F 29 04         A  4431    	CALL	_putch
040D96 C1                  A  4432    	POP	BC
                           A  4433    ;  472		putch(1);
                           A  4434    .LINE 472
                           A  4435    
040D97 01010000            A  4436    	LD	BC,1
040D9B C5                  A  4437    	PUSH	BC
040D9C CD 5F 29 04         A  4438    	CALL	_putch
040DA0 C1                  A  4439    	POP	BC
                           A  4440    ;  473		putch(0);
                           A  4441    .LINE 473
                           A  4442    
040DA1 01000000            A  4443    	LD	BC,0
040DA5 C5                  A  4444    	PUSH	BC
040DA6 CD 5F 29 04         A  4445    	CALL	_putch
040DAA C1                  A  4446    	POP	BC
                           A  4447    ;  474	}
                           A  4448    .LINE 474
                           A  4449    
040DAB DDF9                A  4450    	LD	SP,IX
040DAD DDE1                A  4451    	POP	IX
040DAF C9                  A  4452    	RET	
                           A  4453    
                           A  4454    
                           A  4455    ;**************************** _vdp_cursorDisabl
                           A  4456    ;Name                         Addr/Register   S
                           A  4457    ;_putch                              IMPORT  --
                           A  4458    
                           A  4459    
                           A  4460    ; Stack Frame Size: 6 (bytes)
                           A  4461    ;       Spill Code: 0 (instruction)
                           A  4462    
                           A  4463    
                           A  4464    .ENDFUNC "vdp_cursorDisable",474,"_vdp_cursorDi
                           A  4465    ;  475	
                           A  4466    ;  476	void vdp_cursorEnable(void)
                           A  4467    ;  477	{
040DB0                     A  4468    _vdp_cursorEnable:
                           A  4469    .DEFINE "_vdp_cursorEnable"
                           A  4470    
                           A  4471    .VALUE _vdp_cursorEnable
                           A  4472    
                           A  4473    .CLASS 2
                           A  4474    
                           A  4475    .TYPE 65
                           A  4476    
                           A  4477    .ENDEF
                           A  4478    
                           A  4479    .BEGFUNC "vdp_cursorEnable",477,"_vdp_cursorEna
                           A  4480    
040DB0 DDE5                A  4481    	PUSH	IX
040DB2 DD210000 00         A  4482    	LD	IX,0
040DB7 DD39                A  4483    	ADD	IX,SP
                           A  4484    ;  478		putch(23);
                           A  4485    .LINE 478
                           A  4486    
040DB9 01170000            A  4487    	LD	BC,23
040DBD C5                  A  4488    	PUSH	BC
040DBE CD 5F 29 04         A  4489    	CALL	_putch
040DC2 C1                  A  4490    	POP	BC
                           A  4491    ;  479		putch(1);
                           A  4492    .LINE 479
                           A  4493    
040DC3 01010000            A  4494    	LD	BC,1
040DC7 C5                  A  4495    	PUSH	BC
040DC8 CD 5F 29 04         A  4496    	CALL	_putch
040DCC C1                  A  4497    	POP	BC
                           A  4498    ;  480		putch(1);
                           A  4499    .LINE 480
                           A  4500    
040DCD 01010000            A  4501    	LD	BC,1
040DD1 C5                  A  4502    	PUSH	BC
040DD2 CD 5F 29 04         A  4503    	CALL	_putch
040DD6 C1                  A  4504    	POP	BC
                           A  4505    ;  481	}
                           A  4506    .LINE 481
                           A  4507    
040DD7 DDF9                A  4508    	LD	SP,IX
040DD9 DDE1                A  4509    	POP	IX
040DDB C9                  A  4510    	RET	
                           A  4511    
                           A  4512    
                           A  4513    ;**************************** _vdp_cursorEnable
                           A  4514    ;Name                         Addr/Register   S
                           A  4515    ;_putch                              IMPORT  --
                           A  4516    
                           A  4517    
                           A  4518    ; Stack Frame Size: 6 (bytes)
                           A  4519    ;       Spill Code: 0 (instruction)
                           A  4520    
                           A  4521    
                           A  4522    .ENDFUNC "vdp_cursorEnable",481,"_vdp_cursorEna
                           A  4523    ;  482	
                           A  4524    ;  483	void vdp_scroll(unsigned char extent, u
                           A  4525    ;  484	{
040DDC                     A  4526    _vdp_scroll:
                           A  4527    .DEFINE "_vdp_scroll"
                           A  4528    
                           A  4529    .VALUE _vdp_scroll
                           A  4530    
                           A  4531    .CLASS 2
                           A  4532    
                           A  4533    .TYPE 65
                           A  4534    
                           A  4535    .ENDEF
                           A  4536    
                           A  4537    .BEGFUNC "vdp_scroll",484,"_vdp_scroll"
                           A  4538    
                           A  4539    .LINE 484
                           A  4540    
                           A  4541    .DEFINE "extent"
                           A  4542    
                           A  4543    .CLASS 65
                           A  4544    
                           A  4545    .VALUE 6
                           A  4546    
                           A  4547    .TYPE 12
                           A  4548    
                           A  4549    .ENDEF
                           A  4550    
                           A  4551    .DEFINE "direction"
                           A  4552    
                           A  4553    .CLASS 65
                           A  4554    
                           A  4555    .VALUE 9
                           A  4556    
                           A  4557    .TYPE 12
                           A  4558    
                           A  4559    .ENDEF
                           A  4560    
                           A  4561    .DEFINE "speed"
                           A  4562    
                           A  4563    .CLASS 65
                           A  4564    
                           A  4565    .VALUE 12
                           A  4566    
                           A  4567    .TYPE 12
                           A  4568    
                           A  4569    .ENDEF
                           A  4570    
040DDC DDE5                A  4571    	PUSH	IX
040DDE DD210000 00         A  4572    	LD	IX,0
040DE3 DD39                A  4573    	ADD	IX,SP
                           A  4574    ;  485		putch(23);
                           A  4575    .LINE 485
                           A  4576    
040DE5 01170000            A  4577    	LD	BC,23
040DE9 C5                  A  4578    	PUSH	BC
040DEA CD 5F 29 04         A  4579    	CALL	_putch
040DEE C1                  A  4580    	POP	BC
                           A  4581    ;  486		putch(7);	// scroll
                           A  4582    .LINE 486
                           A  4583    
040DEF 01070000            A  4584    	LD	BC,7
040DF3 C5                  A  4585    	PUSH	BC
040DF4 CD 5F 29 04         A  4586    	CALL	_putch
040DF8 C1                  A  4587    	POP	BC
                           A  4588    ;  487		putch(extent);
                           A  4589    .LINE 487
                           A  4590    
040DF9 DD7E06              A  4591    	LD	A,(IX+%6)
040DFC B7ED62              A  4592    	UEXT	HL
040DFF 6F                  A  4593    	LD	L,A
040E00 E5                  A  4594    	PUSH	HL
040E01 CD 5F 29 04         A  4595    	CALL	_putch
040E05 C1                  A  4596    	POP	BC
                           A  4597    ;  488		putch(direction);
                           A  4598    .LINE 488
                           A  4599    
040E06 DD7E09              A  4600    	LD	A,(IX+%9)
040E09 B7ED62              A  4601    	UEXT	HL
040E0C 6F                  A  4602    	LD	L,A
040E0D E5                  A  4603    	PUSH	HL
040E0E CD 5F 29 04         A  4604    	CALL	_putch
040E12 C1                  A  4605    	POP	BC
                           A  4606    ;  489		putch(speed);
                           A  4607    .LINE 489
                           A  4608    
040E13 DD7E0C              A  4609    	LD	A,(IX+%C)
040E16 B7ED62              A  4610    	UEXT	HL
040E19 6F                  A  4611    	LD	L,A
040E1A E5                  A  4612    	PUSH	HL
040E1B CD 5F 29 04         A  4613    	CALL	_putch
040E1F C1                  A  4614    	POP	BC
                           A  4615    .LINE 490
                           A  4616    
040E20 DDF9                A  4617    	LD	SP,IX
040E22 DDE1                A  4618    	POP	IX
040E24 C9                  A  4619    	RET	
                           A  4620    
                           A  4621    
                           A  4622    ;**************************** _vdp_scroll *****
                           A  4623    ;Name                         Addr/Register   S
                           A  4624    ;_putch                              IMPORT  --
                           A  4625    ;speed                                IX+12    
                           A  4626    ;direction                             IX+9    
                           A  4627    ;extent                                IX+6    
                           A  4628    
                           A  4629    
                           A  4630    ; Stack Frame Size: 15 (bytes)
                           A  4631    ;       Spill Code: 0 (instruction)
                           A  4632    
                           A  4633    
                           A  4634    .ENDFUNC "vdp_scroll",490,"_vdp_scroll"
                           A  4635    	XREF _getsysvar_scrchar:ROM
                           A  4636    	XREF _getsysvar_cursorY:ROM
                           A  4637    	XREF _getsysvar_cursorX:ROM
                           A  4638    	XREF _putch:ROM
                           A  4639    	XREF __imuls:ROM
                           A  4640    	XREF __ior:ROM
                           A  4641    	XREF __lshru:ROM
                           A  4642    	XREF __stoiu:ROM
                           A  4643    	XREF __setflag:ROM
                           A  4644    	XREF __icmpzero:ROM
                           A  4645    	XREF __ishru_b:ROM
                           A  4646    	XREF __ishrs_b:ROM
                           A  4647    	XDEF _vdp_scroll
                           A  4648    	XDEF _vdp_cursorEnable
                           A  4649    	XDEF _vdp_cursorDisable
                           A  4650    	XDEF _vdp_setpagedMode
                           A  4651    	XDEF _vdp_asciiCodeAt
                           A  4652    	XDEF _vdp_cursorGetYpos
                           A  4653    	XDEF _vdp_cursorGetXpos
                           A  4654    	XDEF _vdp_spriteRefresh
                           A  4655    	XDEF _vdp_spriteActivateTotal
                           A  4656    	XDEF _vdp_spriteMoveBy
                           A  4657    	XDEF _vdp_spriteMoveBySelected
                           A  4658    	XDEF _vdp_spriteMoveTo
                           A  4659    	XDEF _vdp_spriteMoveToSelected
                           A  4660    	XDEF _vdp_spriteHide
                           A  4661    	XDEF _vdp_spriteHideSelected
                           A  4662    	XDEF _vdp_spriteShow
                           A  4663    	XDEF _vdp_spriteShowSelected
                           A  4664    	XDEF _vdp_spriteSetFrame
                           A  4665    	XDEF _vdp_spriteSetFrameSelected
                           A  4666    	XDEF _vdp_spritePreviousFrame
                           A  4667    	XDEF _vdp_spritePreviousFrameSelected
                           A  4668    	XDEF _vdp_spriteNextFrame
                           A  4669    	XDEF _vdp_spriteNextFrameSelected
                           A  4670    	XDEF _vdp_spriteAddFrame
                           A  4671    	XDEF _vdp_spriteAddFrameSelected
                           A  4672    	XDEF _vdp_spriteClearFrames
                           A  4673    	XDEF _vdp_spriteClearFramesSelected
                           A  4674    	XDEF _vdp_spriteSelect
                           A  4675    	XDEF _vdp_bitmapCreateSolidColor
                           A  4676    	XDEF _vdp_bitmapCreateSolidColorSelected
                           A  4677    	XDEF _vdp_bitmapDraw
                           A  4678    	XDEF _vdp_bitmapDrawSelected
                           A  4679    	XDEF _vdp_bitmapSendData
                           A  4680    	XDEF _vdp_bitmapSendDataSelected
                           A  4681    	XDEF _vdp_bitmapSelect
                           A  4682    	XDEF _vdp_plotSetOrigin
                           A  4683    	XDEF _vdp_plotCircleCircumference
                           A  4684    	XDEF _vdp_plotCircleRadius
                           A  4685    	XDEF _vdp_plotTriangle
                           A  4686    	XDEF _vdp_plotPoint
                           A  4687    	XDEF _vdp_plotLineTo
                           A  4688    	XDEF _vdp_plotMoveTo
                           A  4689    	XDEF _vdp_plot
                           A  4690    	XDEF _vdp_plotColour
                           A  4691    	XDEF _vdp_clearGraphics
                           A  4692    	XDEF _vdp_bgcolour
                           A  4693    	XDEF _vdp_fgcolour
                           A  4694    	XDEF _vdp_cursorGoto
                           A  4695    	XDEF _vdp_cursorUp
                           A  4696    	XDEF _vdp_cursorHome
                           A  4697    	XDEF _vdp_cls
                           A  4698    	XDEF _vdp_setPaletteColor
                           A  4699    	XDEF _vdp_getMode
                           A  4700    	XDEF _vdp_mode
                           A  4701    	XDEF _write32bit
                           A  4702    	XDEF _write16bit
                           A  4703    	END


Errors: 0
Warnings: 0
Lines Assembled: 4704
